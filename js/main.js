/*
 TweenJS
 Visit http://createjs.com/ for documentation, updates and examples.

 Copyright (c) 2010 gskinner.com, inc.

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
this.createjs=this.createjs||{};createjs.extend=function(a,c){function b(){this.constructor=a}b.prototype=c.prototype;return a.prototype=new b};this.createjs=this.createjs||{};createjs.promote=function(a,c){var b=a.prototype,e=Object.getPrototypeOf&&Object.getPrototypeOf(b)||b.__proto__;if(e){b[(c+="_")+"constructor"]=e.constructor;for(var d in e)b.hasOwnProperty(d)&&"function"==typeof e[d]&&(b[c+d]=e[d])}return a};this.createjs=this.createjs||{};
createjs.deprecate=function(a,c){return function(){var b="Deprecated property or method '"+c+"'. See docs for info.";console&&(console.warn?console.warn(b):console.log(b));return a&&a.apply(this,arguments)}};this.createjs=this.createjs||{};
(function(){function a(b,a,d){this.type=b;this.currentTarget=this.target=null;this.eventPhase=0;this.bubbles=!!a;this.cancelable=!!d;this.timeStamp=(new Date).getTime();this.removed=this.immediatePropagationStopped=this.propagationStopped=this.defaultPrevented=!1}var c=a.prototype;c.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0};c.stopPropagation=function(){this.propagationStopped=!0};c.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=
!0};c.remove=function(){this.removed=!0};c.clone=function(){return new a(this.type,this.bubbles,this.cancelable)};c.set=function(b){for(var a in b)this[a]=b[a];return this};c.toString=function(){return"[Event (type="+this.type+")]"};createjs.Event=a})();this.createjs=this.createjs||{};
(function(){function a(){this._captureListeners=this._listeners=null}var c=a.prototype;a.initialize=function(b){b.addEventListener=c.addEventListener;b.on=c.on;b.removeEventListener=b.off=c.removeEventListener;b.removeAllEventListeners=c.removeAllEventListeners;b.hasEventListener=c.hasEventListener;b.dispatchEvent=c.dispatchEvent;b._dispatchEvent=c._dispatchEvent;b.willTrigger=c.willTrigger};c.addEventListener=function(b,a,d){var e=d?this._captureListeners=this._captureListeners||{}:this._listeners=
this._listeners||{};var c=e[b];c&&this.removeEventListener(b,a,d);(c=e[b])?c.push(a):e[b]=[a];return a};c.on=function(b,a,d,f,c,m){a.handleEvent&&(d=d||a,a=a.handleEvent);d=d||this;return this.addEventListener(b,function(b){a.call(d,b,c);f&&b.remove()},m)};c.removeEventListener=function(b,a,d){if(d=d?this._captureListeners:this._listeners){var e=d[b];if(e)for(var c=0,m=e.length;c<m;c++)if(e[c]==a){1==m?delete d[b]:e.splice(c,1);break}}};c.off=c.removeEventListener;c.removeAllEventListeners=function(b){b?
(this._listeners&&delete this._listeners[b],this._captureListeners&&delete this._captureListeners[b]):this._listeners=this._captureListeners=null};c.dispatchEvent=function(b,a,d){if("string"==typeof b){var e=this._listeners;if(!(a||e&&e[b]))return!0;b=new createjs.Event(b,a,d)}else b.target&&b.clone&&(b=b.clone());try{b.target=this}catch(g){}if(b.bubbles&&this.parent){d=this;for(a=[d];d.parent;)a.push(d=d.parent);e=a.length;for(d=e-1;0<=d&&!b.propagationStopped;d--)a[d]._dispatchEvent(b,1+(0==d));
for(d=1;d<e&&!b.propagationStopped;d++)a[d]._dispatchEvent(b,3)}else this._dispatchEvent(b,2);return!b.defaultPrevented};c.hasEventListener=function(b){var a=this._listeners,d=this._captureListeners;return!!(a&&a[b]||d&&d[b])};c.willTrigger=function(b){for(var a=this;a;){if(a.hasEventListener(b))return!0;a=a.parent}return!1};c.toString=function(){return"[EventDispatcher]"};c._dispatchEvent=function(b,a){var d,e,c=2>=a?this._captureListeners:this._listeners;if(b&&c&&(e=c[b.type])&&(d=e.length)){try{b.currentTarget=
this}catch(l){}try{b.eventPhase=a|0}catch(l){}b.removed=!1;e=e.slice();for(c=0;c<d&&!b.immediatePropagationStopped;c++){var m=e[c];m.handleEvent?m.handleEvent(b):m(b);b.removed&&(this.off(b.type,m,1==a),b.removed=!1)}}2===a&&this._dispatchEvent(b,2.1)};createjs.EventDispatcher=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"Ticker cannot be instantiated.";}a.RAF_SYNCHED="synched";a.RAF="raf";a.TIMEOUT="timeout";a.timingMode=null;a.maxDelta=0;a.paused=!1;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a._addEventListener=a.addEventListener;a.addEventListener=function(){!a._inited&&a.init();return a._addEventListener.apply(a,arguments)};a._inited=!1;a._startTime=0;a._pausedTime=
0;a._ticks=0;a._pausedTicks=0;a._interval=50;a._lastTime=0;a._times=null;a._tickTimes=null;a._timerId=null;a._raf=!0;a._setInterval=function(b){a._interval=b;a._inited&&a._setupTick()};a.setInterval=createjs.deprecate(a._setInterval,"Ticker.setInterval");a._getInterval=function(){return a._interval};a.getInterval=createjs.deprecate(a._getInterval,"Ticker.getInterval");a._setFPS=function(b){a._setInterval(1E3/b)};a.setFPS=createjs.deprecate(a._setFPS,"Ticker.setFPS");a._getFPS=function(){return 1E3/
a._interval};a.getFPS=createjs.deprecate(a._getFPS,"Ticker.getFPS");try{Object.defineProperties(a,{interval:{get:a._getInterval,set:a._setInterval},framerate:{get:a._getFPS,set:a._setFPS}})}catch(e){console.log(e)}a.init=function(){a._inited||(a._inited=!0,a._times=[],a._tickTimes=[],a._startTime=a._getTime(),a._times.push(a._lastTime=0),a.interval=a._interval)};a.reset=function(){if(a._raf){var b=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||
window.msCancelAnimationFrame;b&&b(a._timerId)}else clearTimeout(a._timerId);a.removeAllEventListeners("tick");a._timerId=a._times=a._tickTimes=null;a._startTime=a._lastTime=a._ticks=a._pausedTime=0;a._inited=!1};a.getMeasuredTickTime=function(b){var d=0,e=a._tickTimes;if(!e||1>e.length)return-1;b=Math.min(e.length,b||a._getFPS()|0);for(var c=0;c<b;c++)d+=e[c];return d/b};a.getMeasuredFPS=function(b){var d=a._times;if(!d||2>d.length)return-1;b=Math.min(d.length-1,b||a._getFPS()|0);return 1E3/((d[0]-
d[b])/b)};a.getTime=function(b){return a._startTime?a._getTime()-(b?a._pausedTime:0):-1};a.getEventTime=function(b){return a._startTime?(a._lastTime||a._startTime)-(b?a._pausedTime:0):-1};a.getTicks=function(b){return a._ticks-(b?a._pausedTicks:0)};a._handleSynch=function(){a._timerId=null;a._setupTick();a._getTime()-a._lastTime>=.97*(a._interval-1)&&a._tick()};a._handleRAF=function(){a._timerId=null;a._setupTick();a._tick()};a._handleTimeout=function(){a._timerId=null;a._setupTick();a._tick()};a._setupTick=
function(){if(null==a._timerId){var b=a.timingMode;if(b==a.RAF_SYNCHED||b==a.RAF){var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(d){a._timerId=d(b==a.RAF?a._handleRAF:a._handleSynch);a._raf=!0;return}}a._raf=!1;a._timerId=setTimeout(a._handleTimeout,a._interval)}};a._tick=function(){var b=a.paused,d=a._getTime(),c=d-a._lastTime;a._lastTime=d;a._ticks++;b&&(a._pausedTicks++,a._pausedTime+=
c);if(a.hasEventListener("tick")){var g=new createjs.Event("tick"),m=a.maxDelta;g.delta=m&&c>m?m:c;g.paused=b;g.time=d;g.runTime=d-a._pausedTime;a.dispatchEvent(g)}for(a._tickTimes.unshift(a._getTime()-d);100<a._tickTimes.length;)a._tickTimes.pop();for(a._times.unshift(d);100<a._times.length;)a._times.pop()};var c=window,b=c.performance.now||c.performance.mozNow||c.performance.msNow||c.performance.oNow||c.performance.webkitNow;a._getTime=function(){return(b&&b.call(c.performance)||(new Date).getTime())-
a._startTime};createjs.Ticker=a})();this.createjs=this.createjs||{};
(function(){function a(b){this.EventDispatcher_constructor();this.ignoreGlobalPause=!1;this.loop=0;this.bounce=this.reversed=this.useTicks=!1;this.timeScale=1;this.position=this.duration=0;this.rawPosition=-1;this._paused=!0;this._labelList=this._labels=this._parent=this._prev=this._next=null;b&&(this.useTicks=!!b.useTicks,this.ignoreGlobalPause=!!b.ignoreGlobalPause,this.loop=!0===b.loop?-1:b.loop||0,this.reversed=!!b.reversed,this.bounce=!!b.bounce,this.timeScale=b.timeScale||1,b.onChange&&this.addEventListener("change",
b.onChange),b.onComplete&&this.addEventListener("complete",b.onComplete))}var c=createjs.extend(a,createjs.EventDispatcher);c._setPaused=function(b){createjs.Tween._register(this,b);return this};c.setPaused=createjs.deprecate(c._setPaused,"AbstractTween.setPaused");c._getPaused=function(){return this._paused};c.getPaused=createjs.deprecate(c._getPaused,"AbstactTween.getPaused");c._getCurrentLabel=function(b){var a=this.getLabels();null==b&&(b=this.position);for(var d=0,c=a.length;d<c&&!(b<a[d].position);d++);
return 0===d?null:a[d-1].label};c.getCurrentLabel=createjs.deprecate(c._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(c,{paused:{set:c._setPaused,get:c._getPaused},currentLabel:{get:c._getCurrentLabel}})}catch(b){}c.advance=function(b,a){this.setPosition(this.rawPosition+b*this.timeScale,a)};c.setPosition=function(b,a,d,c){var e=this.duration,f=this.loop,l=this.rawPosition,k=0;0>b&&(b=0);if(0===e){var t=!0;if(-1!==l)return t}else{var h=b/e|0;k=b-h*e;(t=-1!==f&&b>=f*
e+e)&&(b=(k=e)*(h=f)+e);if(b===l)return t;!this.reversed!==!(this.bounce&&h%2)&&(k=e-k)}this.position=k;this.rawPosition=b;this._updatePosition(d,t);t&&(this.paused=!0);c&&c(this);a||this._runActions(l,b,d,!d&&-1===l);this.dispatchEvent("change");t&&this.dispatchEvent("complete")};c.calculatePosition=function(b){var a=this.duration,d=this.loop,c=0;if(0===a)return 0;-1!==d&&b>=d*a+a?(b=a,c=d):0>b?b=0:(c=b/a|0,b-=c*a);return!this.reversed!==!(this.bounce&&c%2)?a-b:b};c.getLabels=function(){var b=this._labelList;
if(!b){b=this._labelList=[];var a=this._labels,d;for(d in a)b.push({label:d,position:a[d]});b.sort(function(b,a){return b.position-a.position})}return b};c.setLabels=function(b){this._labels=b;this._labelList=null};c.addLabel=function(b,a){this._labels||(this._labels={});this._labels[b]=a;var d=this._labelList;if(d){for(var c=0,e=d.length;c<e&&!(a<d[c].position);c++);d.splice(c,0,{label:b,position:a})}};c.gotoAndPlay=function(b){this.paused=!1;this._goto(b)};c.gotoAndStop=function(b){this.paused=
!0;this._goto(b)};c.resolve=function(b){var a=Number(b);isNaN(a)&&(a=this._labels&&this._labels[b]);return a};c.toString=function(){return"[AbstractTween]"};c.clone=function(){throw"AbstractTween can not be cloned.";};c._init=function(b){b&&b.paused||(this.paused=!1);b&&null!=b.position&&this.setPosition(b.position)};c._updatePosition=function(b,a){};c._goto=function(a){a=this.resolve(a);null!=a&&this.setPosition(a,!1,!0)};c._runActions=function(a,c,d,f){if(this._actionHead||this.tweens){var b=this.duration,
e=this.reversed,l=this.bounce,k=this.loop,t,h,n;if(0===b){var p=t=h=n=0;e=l=!1}else p=a/b|0,t=c/b|0,h=a-p*b,n=c-t*b;-1!==k&&(t>k&&(n=b,t=k),p>k&&(h=b,p=k));if(d)return this._runActionsRange(n,n,d,f);if(p!==t||h!==n||d||f){-1===p&&(p=h=0);a=a<=c;c=p;do{k=c===p?h:a?0:b;var r=c===t?n:a?b:0;!e!==!(l&&c%2)&&(k=b-k,r=b-r);if((!l||c===p||k!==r)&&this._runActionsRange(k,r,d,f||c!==p&&!l))return!0;f=!1}while(a&&++c<=t||!a&&--c>=t)}}};c._runActionsRange=function(a,c,d,f){};createjs.AbstractTween=createjs.promote(a,
"EventDispatcher")})();this.createjs=this.createjs||{};
(function(){function a(b,e){this.AbstractTween_constructor(e);this.pluginData=null;this.target=b;this.passive=!1;this._stepTail=this._stepHead=new c(null,0,0,{},null,!0);this._stepPosition=0;this._injected=this._pluginIds=this._plugins=this._actionTail=this._actionHead=null;e&&(this.pluginData=e.pluginData,e.override&&a.removeTweens(b));this.pluginData||(this.pluginData={});this._init(e)}function c(a,b,c,e,l,k){this.next=null;this.prev=a;this.t=b;this.d=c;this.props=e;this.ease=l;this.passive=k;this.index=
a?a.index+1:0}function b(a,b,c,e,l){this.next=null;this.prev=a;this.t=b;this.d=0;this.scope=c;this.funct=e;this.params=l}var e=createjs.extend(a,createjs.AbstractTween);a.IGNORE={};a._tweens=[];a._plugins=null;a._tweenHead=null;a._tweenTail=null;a.get=function(b,c){return new a(b,c)};a.tick=function(b,c){for(var d=a._tweenHead;d;){var e=d._next;c&&!d.ignoreGlobalPause||d._paused||d.advance(d.useTicks?1:b);d=e}};a.handleEvent=function(a){"tick"===a.type&&this.tick(a.delta,a.paused)};a.removeTweens=
function(b){if(b.tweenjs_count){for(var d=a._tweenHead;d;){var c=d._next;d.target===b&&a._register(d,!0);d=c}b.tweenjs_count=0}};a.removeAllTweens=function(){for(var b=a._tweenHead;b;){var c=b._next;b._paused=!0;b.target&&(b.target.tweenjs_count=0);b._next=b._prev=null;b=c}a._tweenHead=a._tweenTail=null};a.hasActiveTweens=function(b){return b?!!b.tweenjs_count:!!a._tweenHead};a._installPlugin=function(b){for(var d=b.priority=b.priority||0,c=a._plugins=a._plugins||[],e=0,l=c.length;e<l&&!(d<c[e].priority);e++);
c.splice(e,0,b)};a._register=function(b,c){var d=b.target;if(!c&&b._paused)d&&(d.tweenjs_count=d.tweenjs_count?d.tweenjs_count+1:1),(d=a._tweenTail)?(a._tweenTail=d._next=b,b._prev=d):a._tweenHead=a._tweenTail=b,!a._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",a),a._inited=!0);else if(c&&!b._paused){d&&d.tweenjs_count--;d=b._next;var e=b._prev;d?d._prev=e:a._tweenTail=e;e?e._next=d:a._tweenHead=d;b._next=b._prev=null}b._paused=c};e.wait=function(b,a){0<b&&this._addStep(+b,this._stepTail.props,
null,a);return this};e.to=function(b,a,c){if(null==a||0>a)a=0;a=this._addStep(+a,null,c);this._appendProps(b,a);return this};e.label=function(b){this.addLabel(b,this.duration);return this};e.call=function(b,a,c){return this._addAction(c||this.target,b,a||[this])};e.set=function(b,a){return this._addAction(a||this.target,this._set,[b])};e.play=function(b){return this._addAction(b||this,this._set,[{paused:!1}])};e.pause=function(b){return this._addAction(b||this,this._set,[{paused:!0}])};e.w=e.wait;
e.t=e.to;e.c=e.call;e.s=e.set;e.toString=function(){return"[Tween]"};e.clone=function(){throw"Tween can not be cloned.";};e._addPlugin=function(b){var a=this._pluginIds||(this._pluginIds={}),c=b.ID;if(c&&!a[c]){a[c]=!0;a=this._plugins||(this._plugins=[]);c=b.priority||0;for(var d=0,e=a.length;d<e;d++)if(c<a[d].priority){a.splice(d,0,b);return}a.push(b)}};e._updatePosition=function(b,a){var c=this._stepHead.next,d=this.position,e=this.duration;if(this.target&&c){for(var f=c.next;f&&f.t<=d;)c=c.next,
f=c.next;this._updateTargetProps(c,a?0===e?1:d/e:(d-c.t)/c.d,a)}this._stepPosition=c?d-c.t:0};e._updateTargetProps=function(b,c,e){if(!(this.passive=!!b.passive)){var d,f=b.prev.props,k=b.props;if(d=b.ease)c=d(c,0,1,1);d=this._plugins;var g;a:for(g in f){var h=f[g];var n=k[g];h=h!==n&&"number"===typeof h?h+(n-h)*c:1<=c?n:h;if(d){n=0;for(var p=d.length;n<p;n++){var r=d[n].change(this,b,g,h,c,e);if(r===a.IGNORE)continue a;void 0!==r&&(h=r)}}this.target[g]=h}}};e._runActionsRange=function(b,a,c,e){var d=
(c=b>a)?this._actionTail:this._actionHead,f=a,m=b;c&&(f=b,m=a);for(var g=this.position;d;){var n=d.t;if(n===a||n>m&&n<f||e&&n===b)if(d.funct.apply(d.scope,d.params),g!==this.position)return!0;d=c?d.prev:d.next}};e._appendProps=function(b,c,e){var d=this._stepHead.props,f=this.target,k=a._plugins,g,h,n=c.prev,p=n.props,r=c.props||(c.props=this._cloneProps(p)),u={};for(g in b)if(b.hasOwnProperty(g)&&(u[g]=r[g]=b[g],void 0===d[g])){var v=void 0;if(k)for(h=k.length-1;0<=h;h--){var w=k[h].init(this,g,
v);void 0!==w&&(v=w);if(v===a.IGNORE){delete r[g];delete u[g];break}}v!==a.IGNORE&&(void 0===v&&(v=f[g]),p[g]=void 0===v?null:v)}for(g in u){var B;for(b=n;(B=b)&&(b=B.prev);)if(b.props!==B.props){if(void 0!==b.props[g])break;b.props[g]=p[g]}}if(!1!==e&&(k=this._plugins))for(h=k.length-1;0<=h;h--)k[h].step(this,c,u);if(e=this._injected)this._injected=null,this._appendProps(e,c,!1)};e._injectProp=function(b,a){(this._injected||(this._injected={}))[b]=a};e._addStep=function(b,a,e,m){a=new c(this._stepTail,
this.duration,b,a,e,m||!1);this.duration+=b;return this._stepTail=this._stepTail.next=a};e._addAction=function(a,c,e){a=new b(this._actionTail,this.duration,a,c,e);this._actionTail?this._actionTail.next=a:this._actionHead=a;this._actionTail=a;return this};e._set=function(b){for(var a in b)this[a]=b[a]};e._cloneProps=function(b){var a={},c;for(c in b)a[c]=b[c];return a};createjs.Tween=createjs.promote(a,"AbstractTween")})();this.createjs=this.createjs||{};
(function(){function a(b){if(b instanceof Array||null==b&&1<arguments.length){var a=b;var c=arguments[1];b=arguments[2]}else b&&(a=b.tweens,c=b.labels);this.AbstractTween_constructor(b);this.tweens=[];a&&this.addTween.apply(this,a);this.setLabels(c);this._init(b)}var c=createjs.extend(a,createjs.AbstractTween);c.addTween=function(b){b._parent&&b._parent.removeTween(b);var a=arguments.length;if(1<a){for(var c=0;c<a;c++)this.addTween(arguments[c]);return arguments[a-1]}if(0===a)return null;this.tweens.push(b);
b._parent=this;b.paused=!0;a=b.duration;0<b.loop&&(a*=b.loop+1);a>this.duration&&(this.duration=a);0<=this.rawPosition&&b.setPosition(this.rawPosition);return b};c.removeTween=function(b){var a=arguments.length;if(1<a){for(var c=!0,f=0;f<a;f++)c=c&&this.removeTween(arguments[f]);return c}if(0===a)return!0;a=this.tweens;for(f=a.length;f--;)if(a[f]===b)return a.splice(f,1),b._parent=null,b.duration>=this.duration&&this.updateDuration(),!0;return!1};c.updateDuration=function(){for(var a=this.duration=
0,c=this.tweens.length;a<c;a++){var d=this.tweens[a],f=d.duration;0<d.loop&&(f*=d.loop+1);f>this.duration&&(this.duration=f)}};c.toString=function(){return"[Timeline]"};c.clone=function(){throw"Timeline can not be cloned.";};c._updatePosition=function(a,c){for(var b=this.position,e=0,g=this.tweens.length;e<g;e++)this.tweens[e].setPosition(b,!0,a)};c._runActionsRange=function(a,c,d,f){for(var b=this.position,e=0,l=this.tweens.length;e<l;e++)if(this.tweens[e]._runActions(a,c,d,f),b!==this.position)return!0};
createjs.Timeline=createjs.promote(a,"AbstractTween")})();this.createjs=this.createjs||{};
(function(){function a(){throw"Ease cannot be instantiated.";}a.linear=function(a){return a};a.none=a.linear;a.get=function(a){-1>a?a=-1:1<a&&(a=1);return function(b){return 0==a?b:0>a?b*(b*-a+1+a):b*((2-b)*a+(1-a))}};a.getPowIn=function(a){return function(b){return Math.pow(b,a)}};a.getPowOut=function(a){return function(b){return 1-Math.pow(1-b,a)}};a.getPowInOut=function(a){return function(b){return 1>(b*=2)?.5*Math.pow(b,a):1-.5*Math.abs(Math.pow(2-b,a))}};a.quadIn=a.getPowIn(2);a.quadOut=a.getPowOut(2);
a.quadInOut=a.getPowInOut(2);a.cubicIn=a.getPowIn(3);a.cubicOut=a.getPowOut(3);a.cubicInOut=a.getPowInOut(3);a.quartIn=a.getPowIn(4);a.quartOut=a.getPowOut(4);a.quartInOut=a.getPowInOut(4);a.quintIn=a.getPowIn(5);a.quintOut=a.getPowOut(5);a.quintInOut=a.getPowInOut(5);a.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)};a.sineOut=function(a){return Math.sin(a*Math.PI/2)};a.sineInOut=function(a){return-.5*(Math.cos(Math.PI*a)-1)};a.getBackIn=function(a){return function(b){return b*b*((a+1)*b-a)}};
a.backIn=a.getBackIn(1.7);a.getBackOut=function(a){return function(b){return--b*b*((a+1)*b+a)+1}};a.backOut=a.getBackOut(1.7);a.getBackInOut=function(a){a*=1.525;return function(b){return 1>(b*=2)?.5*b*b*((a+1)*b-a):.5*((b-=2)*b*((a+1)*b+a)+2)}};a.backInOut=a.getBackInOut(1.7);a.circIn=function(a){return-(Math.sqrt(1-a*a)-1)};a.circOut=function(a){return Math.sqrt(1- --a*a)};a.circInOut=function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)};a.bounceIn=function(c){return 1-
a.bounceOut(1-c)};a.bounceOut=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375};a.bounceInOut=function(c){return.5>c?.5*a.bounceIn(2*c):.5*a.bounceOut(2*c-1)+.5};a.getElasticIn=function(a,b){var c=2*Math.PI;return function(d){if(0==d||1==d)return d;var e=b/c*Math.asin(1/a);return-(a*Math.pow(2,10*--d)*Math.sin((d-e)*c/b))}};a.elasticIn=a.getElasticIn(1,.3);a.getElasticOut=function(a,b){var c=2*Math.PI;
return function(d){return 0==d||1==d?d:a*Math.pow(2,-10*d)*Math.sin((d-b/c*Math.asin(1/a))*c/b)+1}};a.elasticOut=a.getElasticOut(1,.3);a.getElasticInOut=function(a,b){var c=2*Math.PI;return function(d){var e=b/c*Math.asin(1/a);return 1>(d*=2)?-.5*a*Math.pow(2,10*--d)*Math.sin((d-e)*c/b):a*Math.pow(2,-10*--d)*Math.sin((d-e)*c/b)*.5+1}};a.elasticInOut=a.getElasticInOut(1,.3*1.5);createjs.Ease=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"MotionGuidePlugin cannot be instantiated.";}a.priority=0;a.ID="MotionGuide";a.install=function(){createjs.Tween._installPlugin(a);return createjs.Tween.IGNORE};a.init=function(c,b,e){"guide"==b&&c._addPlugin(a)};a.step=function(c,b,e){for(var d in e)if("guide"===d){var f=b.props.guide,g=a._solveGuideData(e.guide,f);f.valid=!g;var m=f.endData;c._injectProp("x",m.x);c._injectProp("y",m.y);if(g||!f.orient)break;f.startOffsetRot=(void 0===b.prev.props.rotation?c.target.rotation||
0:b.prev.props.rotation)-f.startData.rotation;if("fixed"==f.orient)f.endAbsRot=m.rotation+f.startOffsetRot,f.deltaRotation=0;else{g=void 0===e.rotation?c.target.rotation||0:e.rotation;m=g-f.endData.rotation-f.startOffsetRot;var l=m%360;f.endAbsRot=g;switch(f.orient){case "auto":f.deltaRotation=m;break;case "cw":f.deltaRotation=(l+360)%360+360*Math.abs(m/360|0);break;case "ccw":f.deltaRotation=(l-360)%360+-360*Math.abs(m/360|0)}}c._injectProp("rotation",f.endAbsRot)}};a.change=function(c,b,e,d,f,g){if((d=
b.props.guide)&&b.props!==b.prev.props&&d!==b.prev.props.guide){if("guide"===e&&!d.valid||"x"==e||"y"==e||"rotation"===e&&d.orient)return createjs.Tween.IGNORE;a._ratioToPositionData(f,d,c.target)}};a.debug=function(c,b,e){c=c.guide||c;var d=a._findPathProblems(c);d&&console.error("MotionGuidePlugin Error found: \n"+d);if(!b)return d;var f,g=c.path,m=g.length;b.save();b.lineCap="round";b.lineJoin="miter";b.beginPath();b.moveTo(g[0],g[1]);for(f=2;f<m;f+=4)b.quadraticCurveTo(g[f],g[f+1],g[f+2],g[f+
3]);b.strokeStyle="black";b.lineWidth=4.5;b.stroke();b.strokeStyle="white";b.lineWidth=3;b.stroke();b.closePath();g=e.length;if(e&&g){m={};var l={};a._solveGuideData(c,m);for(f=0;f<g;f++)m.orient="fixed",a._ratioToPositionData(e[f],m,l),b.beginPath(),b.moveTo(l.x,l.y),b.lineTo(l.x+9*Math.cos(.0174533*l.rotation),l.y+9*Math.sin(.0174533*l.rotation)),b.strokeStyle="black",b.lineWidth=4.5,b.stroke(),b.strokeStyle="red",b.lineWidth=3,b.stroke(),b.closePath()}b.restore();return d};a._solveGuideData=function(c,
b){var e;if(e=a.debug(c))return e;var d=b.path=c.path;b.orient=c.orient;b.subLines=[];b.totalLength=0;b.startOffsetRot=0;b.deltaRotation=0;b.startData={ratio:0};b.endData={ratio:1};b.animSpan=1;var f=d.length,g,m={};var l=d[0];var k=d[1];for(e=2;e<f;e+=4){var t=d[e];var h=d[e+1];var n=d[e+2];var p=d[e+3];var r={weightings:[],estLength:0,portion:0},u=l;var v=k;for(g=1;10>=g;g++)a._getParamsForCurve(l,k,t,h,n,p,g/10,!1,m),u=m.x-u,v=m.y-v,v=Math.sqrt(u*u+v*v),r.weightings.push(v),r.estLength+=v,u=m.x,
v=m.y;b.totalLength+=r.estLength;for(g=0;10>g;g++)v=r.estLength,r.weightings[g]/=v;b.subLines.push(r);l=n;k=p}v=b.totalLength;d=b.subLines.length;for(e=0;e<d;e++)b.subLines[e].portion=b.subLines[e].estLength/v;e=isNaN(c.start)?0:c.start;d=isNaN(c.end)?1:c.end;a._ratioToPositionData(e,b,b.startData);a._ratioToPositionData(d,b,b.endData);b.startData.ratio=e;b.endData.ratio=d;b.animSpan=b.endData.ratio-b.startData.ratio};a._ratioToPositionData=function(c,b,e){var d=b.subLines,f,g=0,m=c*b.animSpan+b.startData.ratio;
var l=d.length;for(f=0;f<l;f++){var k=d[f].portion;if(g+k>=m){var t=f;break}g+=k}void 0===t&&(t=l-1,g-=k);d=d[t].weightings;var h=k;l=d.length;for(f=0;f<l;f++){k=d[f]*h;if(g+k>=m)break;g+=k}t=4*t+2;l=b.path;a._getParamsForCurve(l[t-2],l[t-1],l[t],l[t+1],l[t+2],l[t+3],f/10+(m-g)/k*.1,b.orient,e);b.orient&&(e.rotation=.99999<=c&&1.00001>=c&&void 0!==b.endAbsRot?b.endAbsRot:e.rotation+(b.startOffsetRot+c*b.deltaRotation));return e};a._getParamsForCurve=function(a,b,e,d,f,g,m,l,k){var c=1-m;k.x=c*c*a+
2*c*m*e+m*m*f;k.y=c*c*b+2*c*m*d+m*m*g;l&&(k.rotation=57.2957795*Math.atan2((d-b)*c+(g-d)*m,(e-a)*c+(f-e)*m))};a._findPathProblems=function(a){var b=a.path,c=b&&b.length||0;if(6>c||(c-2)%4)return"\tCannot parse 'path' array due to invalid number of entries in path. There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n"+("Only [ "+c+" ] values found. Expected: "+
Math.max(4*Math.ceil((c-2)/4)+2,6));for(var d=0;d<c;d++)if(isNaN(b[d]))return"All data in path array must be numeric";b=a.start;if(isNaN(b)&&void 0!==b)return"'start' out of bounds. Expected 0 to 1, got: "+b;b=a.end;if(isNaN(b)&&void 0!==b)return"'end' out of bounds. Expected 0 to 1, got: "+b;if((a=a.orient)&&"fixed"!=a&&"auto"!=a&&"cw"!=a&&"ccw"!=a)return'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+a};createjs.MotionGuidePlugin=a})();
this.createjs=this.createjs||{};(function(){var a=createjs.TweenJS=createjs.TweenJS||{};a.version="1.0.0";a.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"})();
(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},c="undefined"!==typeof module&&module.exports,b="undefined"!==typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,e=function(){for(var b,c=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),
"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],d=0,e=c.length,f={};d<e;d++)if((b=c[d])&&b[1]in a){for(d=0;d<b.length;d++)f[c[0][d]]=
b[d];return f}return!1}(),d={change:e.fullscreenchange,error:e.fullscreenerror},f={request:function(c){var d=e.requestFullscreen;c=c||a.documentElement;if(/5\.1[.\d]* Safari/.test(navigator.userAgent))c[d]();else c[d](b&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){a[e.exitFullscreen]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},onchange:function(a){this.on("change",a)},onerror:function(a){this.on("error",a)},on:function(b,c){var e=d[b];e&&a.addEventListener(e,c,!1)},off:function(b,
c){var e=d[b];e&&a.removeEventListener(e,c,!1)},raw:e};e?(Object.defineProperties(f,{isFullscreen:{get:function(){return!!a[e.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[e.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!a[e.fullscreenEnabled]}}}),c?module.exports=f:window.screenfull=f):c?module.exports=!1:window.screenfull=!1})();
(function(){function a(a){a=String(a);return a.charAt(0).toUpperCase()+a.slice(1)}function c(a,b){var c=-1,d=a?a.length:0;if("number"==typeof d&&-1<d&&d<=p)for(;++c<d;)b(a[c],c,a);else e(a,b)}function b(b){b=String(b).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(b)?b:a(b)}function e(a,b){for(var c in a)u.call(a,c)&&b(a[c],c,a)}function d(b){return null==b?a(b):v.call(b).slice(8,-1)}function f(a,b){var c=null!=a?typeof a[b]:"number";return!/^(?:boolean|number|string|undefined)$/.test(c)&&
("object"==c?!!a[b]:!0)}function g(a){return String(a).replace(/([ -])(?!$)/g,"$1?")}function m(a,b){var d=null;c(a,function(c,e){d=b(d,c,e,a)});return d}function l(a){function c(c){return m(c,function(c,d){var e=d.pattern||g(d);!c&&(c=RegExp("\\b"+e+" *\\d+[.\\w_]*","i").exec(a)||RegExp("\\b"+e+" *\\w+-[\\w]*","i").exec(a)||RegExp("\\b"+e+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(a))&&((c=String(d.label&&!RegExp(e,"i").test(d.label)?d.label:c).split("/"))[1]&&!/[\d.]+/.test(c[0])&&(c[0]+=
" "+c[1]),d=d.label||d,c=b(c[0].replace(RegExp(e,"i"),d).replace(RegExp("; *(?:"+d+"[_-])?","i")," ").replace(RegExp("("+d+")[-_.]?(\\w)","i"),"$1 $2")));return c})}function k(b){return m(b,function(b,c){return b||(RegExp(c+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(a)||0)[1]||null})}var h=t,n=a&&"object"==typeof a&&"String"!=d(a);n&&(h=a,a=null);var u=h.navigator||{},p=u.userAgent||"";a||(a=p);var w=n?!!u.likeChrome:/\bChrome\b/.test(a)&&!/internal|\n/i.test(v.toString()),
B=n?"Object":"ScriptBridgingProxyObject",I=n?"Object":"Environment",L=n&&h.java?"JavaPackage":d(h.java),P=n?"Object":"RuntimeObject";I=(L=/\bJava/.test(L)&&h.java)&&d(h.environment)==I;var M=L?"a":"\u03b1",S=L?"b":"\u03b2",R=h.document||{},J=h.operamini||h.opera,O=r.test(O=n&&J?J["[[Class]]"]:d(J))?O:J=null,q,U=a;n=[];var V=null,Q=a==p;p=Q&&J&&"function"==typeof J.version&&J.version();var E=function(b){return m(b,function(b,c){return b||RegExp("\\b"+(c.pattern||g(c))+"\\b","i").exec(a)&&(c.label||
c)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),x=function(b){return m(b,function(b,c){return b||RegExp("\\b"+(c.pattern||g(c))+"\\b","i").exec(a)&&(c.label||c)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser",
"PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},
{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),F=c([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad",
"iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),K=function(b){return m(b,function(b,c,d){return b||(c[F]||c[/^[a-z]+(?: +[a-z]+\b)*/i.exec(F)]||RegExp("\\b"+g(d)+"(?:\\b|\\w*\\d)","i").exec(a))&&d})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},
"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),z=function(c){return m(c,function(c,d){var e=d.pattern||g(d);if(!c&&(c=RegExp("\\b"+e+"(?:/[\\d.]+|[ \\w.]*)","i").exec(a))){var f=c,k=d.label||d,h={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};e&&k&&/^Win/i.test(f)&&!/^Windows Phone /i.test(f)&&(h=h[/[\d.]+$/.exec(f)])&&(f="Windows "+h);f=String(f);e&&k&&(f=f.replace(RegExp(e,"i"),k));c=f=b(f.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/,
" $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return c})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac",
"Windows 98;","Windows "]);E&&(E=[E]);K&&!F&&(F=c([K]));if(q=/\bGoogle TV\b/.exec(F))F=q[0];/\bSimulator\b/i.test(a)&&(F=(F?F+" ":"")+"Simulator");"Opera Mini"==x&&/\bOPiOS\b/.test(a)&&n.push("running in Turbo/Uncompressed mode");"IE"==x&&/\blike iPhone OS\b/.test(a)?(q=l(a.replace(/like iPhone OS/,"")),K=q.manufacturer,F=q.product):/^iP/.test(F)?(x||(x="Safari"),z="iOS"+((q=/ OS ([\d_]+)/i.exec(a))?" "+q[1].replace(/_/g,"."):"")):"Konqueror"!=x||/buntu/i.test(z)?K&&"Google"!=K&&(/Chrome/.test(x)&&
!/\bMobile Safari\b/i.test(a)||/\bVita\b/.test(F))||/\bAndroid\b/.test(z)&&/^Chrome/.test(x)&&/\bVersion\//i.test(a)?(x="Android Browser",z=/\bAndroid\b/.test(z)?z:"Android"):"Silk"==x?(/\bMobi/i.test(a)||(z="Android",n.unshift("desktop mode")),/Accelerated *= *true/i.test(a)&&n.unshift("accelerated")):"PaleMoon"==x&&(q=/\bFirefox\/([\d.]+)\b/.exec(a))?n.push("identifying as Firefox "+q[1]):"Firefox"==x&&(q=/\b(Mobile|Tablet|TV)\b/i.exec(a))?(z||(z="Firefox OS"),F||(F=q[1])):!x||(q=!/\bMinefield\b/i.test(a)&&
/\b(?:Firefox|Safari)\b/.exec(x))?(x&&!F&&/[\/,]|^[^(]+?\)/.test(a.slice(a.indexOf(q+"/")+8))&&(x=null),(q=F||K||z)&&(F||K||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(z))&&(x=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(z)?z:q)+" Browser")):"Electron"==x&&(q=(/\bChrome\/([\d.]+)\b/.exec(a)||0)[1])&&n.push("Chromium "+q):z="Kubuntu";p||(p=k(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",g(x),"(?:Firefox|Minefield|NetFront)"]));
if(q="iCab"==E&&3<parseFloat(p)&&"WebKit"||/\bOpera\b/.test(x)&&(/\bOPR\b/.test(a)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(a)&&!/^(?:Trident|EdgeHTML)$/.test(E)&&"WebKit"||!E&&/\bMSIE\b/i.test(a)&&("Mac OS"==z?"Tasman":"Trident")||"WebKit"==E&&/\bPlayStation\b(?! Vita\b)/i.test(x)&&"NetFront")E=[q];"IE"==x&&(q=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(a)||0)[1])?(x+=" Mobile",z="Windows Phone "+(/\+$/.test(q)?q:q+".x"),n.unshift("desktop mode")):/\bWPDesktop\b/i.test(a)?(x="IE Mobile",z="Windows Phone 8.x",
n.unshift("desktop mode"),p||(p=(/\brv:([\d.]+)/.exec(a)||0)[1])):"IE"!=x&&"Trident"==E&&(q=/\brv:([\d.]+)/.exec(a))&&(x&&n.push("identifying as "+x+(p?" "+p:"")),x="IE",p=q[1]);if(Q){if(f(h,"global"))if(L&&(q=L.lang.System,U=q.getProperty("os.arch"),z=z||q.getProperty("os.name")+" "+q.getProperty("os.version")),I){try{p=h.require("ringo/engine").version.join("."),x="RingoJS"}catch(X){(q=h.system)&&q.global.system==h.system&&(x="Narwhal",z||(z=q[0].os||null))}x||(x="Rhino")}else"object"==typeof h.process&&
!h.process.browser&&(q=h.process)&&("object"==typeof q.versions&&("string"==typeof q.versions.electron?(n.push("Node "+q.versions.node),x="Electron",p=q.versions.electron):"string"==typeof q.versions.nw&&(n.push("Chromium "+p,"Node "+q.versions.node),x="NW.js",p=q.versions.nw)),x||(x="Node.js",U=q.arch,z=q.platform,p=(p=/[\d.]+/.exec(q.version))?p[0]:null));else d(q=h.runtime)==B?(x="Adobe AIR",z=q.flash.system.Capabilities.os):d(q=h.phantom)==P?(x="PhantomJS",p=(q=q.version||null)&&q.major+"."+q.minor+
"."+q.patch):"number"==typeof R.documentMode&&(q=/\bTrident\/(\d+)/i.exec(a))?(p=[p,R.documentMode],(q=+q[1]+4)!=p[1]&&(n.push("IE "+p[1]+" mode"),E&&(E[1]=""),p[1]=q),p="IE"==x?String(p[1].toFixed(1)):p[0]):"number"==typeof R.documentMode&&/^(?:Chrome|Firefox)\b/.test(x)&&(n.push("masking as "+x+" "+p),x="IE",p="11.0",E=["Trident"],z="Windows");z=z&&b(z)}p&&(q=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(p)||/(?:alpha|beta)(?: ?\d)?/i.exec(a+";"+(Q&&u.appMinorVersion))||/\bMinefield\b/i.test(a)&&
"a")&&(V=/b/i.test(q)?"beta":"alpha",p=p.replace(RegExp(q+"\\+?$"),"")+("beta"==V?S:M)+(/\d+\+?/.exec(q)||""));if("Fennec"==x||"Firefox"==x&&/\b(?:Android|Firefox OS)\b/.test(z))x="Firefox Mobile";else if("Maxthon"==x&&p)p=p.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(F))"Xbox 360"==F&&(z=null),"Xbox 360"==F&&/\bIEMobile\b/.test(a)&&n.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(x)&&(!x||F||/Browser|Mobi/.test(x))||"Windows CE"!=z&&!/Mobi/i.test(a))if("IE"==x&&Q)try{null===h.external&&
n.unshift("platform preview")}catch(X){n.unshift("embedded")}else(/\bBlackBerry\b/.test(F)||/\bBB10\b/.test(a))&&(q=(RegExp(F.replace(/ +/g," *")+"/([.\\d]+)","i").exec(a)||0)[1]||p)?(q=[q,/BB10/.test(a)],z=(q[1]?(F=null,K="BlackBerry"):"Device Software")+" "+q[0],p=null):this!=e&&"Wii"!=F&&(Q&&J||/Opera/.test(x)&&/\b(?:MSIE|Firefox)\b/i.test(a)||"Firefox"==x&&/\bOS X (?:\d+\.){2,}/.test(z)||"IE"==x&&(z&&!/^Win/.test(z)&&5.5<p||/\bWindows XP\b/.test(z)&&8<p||8==p&&!/\bTrident\b/.test(a)))&&!r.test(q=
l.call(e,a.replace(r,"")+";"))&&q.name&&(q="ing as "+q.name+((q=q.version)?" "+q:""),r.test(x)?(/\bIE\b/.test(q)&&"Mac OS"==z&&(z=null),q="identify"+q):(q="mask"+q,x=O?b(O.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(q)&&(z=null),Q||(p=null)),E=["Presto"],n.push(q));else x+=" Mobile";if(q=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(a)||0)[1]){q=[parseFloat(q.replace(/\.(\d)$/,".0$1")),q];if("Safari"==x&&"+"==q[1].slice(-1))x="WebKit Nightly",V="alpha",p=q[1].slice(0,-1);else if(p==q[1]||p==(q[2]=
(/\bSafari\/([\d.]+\+?)/i.exec(a)||0)[1]))p=null;q[1]=(/\bChrome\/([\d.]+)/i.exec(a)||0)[1];537.36==q[0]&&537.36==q[2]&&28<=parseFloat(q[1])&&"WebKit"==E&&(E=["Blink"]);Q&&(w||q[1])?(E&&(E[1]="like Chrome"),q=q[1]||(q=q[0],530>q?1:532>q?2:532.05>q?3:533>q?4:534.03>q?5:534.07>q?6:534.1>q?7:534.13>q?8:534.16>q?9:534.24>q?10:534.3>q?11:535.01>q?12:535.02>q?"13+":535.07>q?15:535.11>q?16:535.19>q?17:536.05>q?18:536.1>q?19:537.01>q?20:537.11>q?"21+":537.13>q?23:537.18>q?24:537.24>q?25:537.36>q?26:"Blink"!=
E?"27":"28")):(E&&(E[1]="like Safari"),q=(q=q[0],400>q?1:500>q?2:526>q?3:533>q?4:534>q?"4+":535>q?5:537>q?6:538>q?7:601>q?8:"8"));E&&(E[1]+=" "+(q+="number"==typeof q?".x":/[.+]/.test(q)?"":"+"));"Safari"==x&&(!p||45<parseInt(p))&&(p=q)}"Opera"==x&&(q=/\bzbov|zvav$/.exec(z))?(x+=" ",n.unshift("desktop mode"),"zvav"==q?(x+="Mini",p=null):x+="Mobile",z=z.replace(RegExp(" *"+q+"$"),"")):"Safari"==x&&/\bChrome\b/.exec(E&&E[1])&&(n.unshift("desktop mode"),x="Chrome Mobile",p=null,/\bOS X\b/.test(z)?(K=
"Apple",z="iOS 4.3+"):z=null);p&&0==p.indexOf(q=/[\d.]+$/.exec(z))&&-1<a.indexOf("/"+q+"-")&&(z=String(z.replace(q,"")).replace(/^ +| +$/g,""));E&&!/\b(?:Avant|Nook)\b/.test(x)&&(/Browser|Lunascape|Maxthon/.test(x)||"Safari"!=x&&/^iOS/.test(z)&&/\bSafari\b/.test(E[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(x)&&E[1])&&(q=E[E.length-1])&&n.push(q);n.length&&(n=["("+n.join("; ")+")"]);K&&F&&0>F.indexOf(K)&&n.push("on "+K);F&&n.push((/^on /.test(n[n.length-
1])?"":"on ")+F);if(z){var W=(q=/ ([\d.+]+)$/.exec(z))&&"/"==z.charAt(z.length-q[0].length-1);z={architecture:32,family:q&&!W?z.replace(q[0],""):z,version:q?q[1]:null,toString:function(){var a=this.version;return this.family+(a&&!W?" "+a:"")+(64==this.architecture?" 64-bit":"")}}}(q=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(U))&&!/\bi686\b/i.test(U)?(z&&(z.architecture=64,z.family=z.family.replace(RegExp(" *"+q),"")),x&&(/\bWOW64\b/i.test(a)||Q&&/\w(?:86|32)$/.test(u.cpuClass||u.platform)&&!/\bWin64; x64\b/i.test(a))&&
n.unshift("32-bit")):z&&/^OS X/.test(z.family)&&"Chrome"==x&&39<=parseFloat(p)&&(z.architecture=64);a||(a=null);h={};h.description=a;h.layout=E&&E[0];h.manufacturer=K;h.name=x;h.prerelease=V;h.product=F;h.ua=a;h.version=x&&p;h.os=z||{architecture:null,family:null,version:null,toString:function(){return"null"}};h.parse=l;h.toString=function(){return this.description||""};h.version&&n.unshift(p);h.name&&n.unshift(x);z&&x&&(z!=String(z).split(" ")[0]||z!=x.split(" ")[0]&&!F)&&n.push(F?"("+z+")":"on "+
z);n.length&&(h.description=n.join(" "));return h}var k={"function":!0,object:!0},t=k[typeof window]&&window||this,h=k[typeof exports]&&exports;k=k[typeof module]&&module&&!module.nodeType&&module;var n=h&&k&&"object"==typeof global&&global;!n||n.global!==n&&n.window!==n&&n.self!==n||(t=n);var p=Math.pow(2,53)-1,r=/\bOpera/;n=Object.prototype;var u=n.hasOwnProperty,v=n.toString,w=l();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t.platform=w,define(function(){return w})):h&&
k?e(w,function(a,b){h[b]=a}):t.platform=w}).call(this);
function buildIOSMeta(){for(var a=[{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black"}],c=0;c<a.length;c++){var b=document.createElement("meta");b.name=a[c].name;b.content=a[c].content;var e=window.document.head.querySelector('meta[name="'+b.name+'"]');e&&e.parentNode.removeChild(e);window.document.head.appendChild(b)}}
function hideIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","none");jQuery(".xxx-ios-fullscreen-scroll").css("display","none");jQuery(".xxx-game-iframe-full").removeClass("xxx-game-iframe-iphone-se")}function buildIOSFullscreenPanel(){jQuery("body").append('<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>')}
function showIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","block");jQuery(".xxx-ios-fullscreen-scroll").css("display","block")}
function __iosResize(){window.scrollTo(0,0);console.log(window.devicePixelRatio);console.log(window.innerWidth);console.log(window.innerHeight);if("iPhone"===platform.product)switch(window.devicePixelRatio){case 2:switch(window.innerWidth){case 568:320!==window.innerHeight&&jQuery(".xxx-game-iframe-full").addClass("xxx-game-iframe-iphone-se");break;case 667:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();
break;default:hideIOSFullscreenPanel()}break;case 3:switch(window.innerWidth){case 736:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 724:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;case 808:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;default:hideIOSFullscreenPanel()}}function iosResize(){__iosResize();setTimeout(function(){__iosResize()},500)}
function iosInIframe(){try{return window.self!==window.top}catch(a){return!0}}$(document).ready(function(){platform&&"iPhone"===platform.product&&"safari"!==platform.name.toLowerCase()&&!iosInIframe()&&(buildIOSFullscreenPanel(),buildIOSMeta())});jQuery(window).resize(function(){platform&&"iPhone"===platform.product&&"safari"!==platform.name.toLowerCase()&&!iosInIframe()&&iosResize()});var s_iScaleFactor=1,s_bIsIphone=!1,s_iOffsetX,s_iOffsetY;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}function isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function isIOS(){var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");for(-1!==navigator.userAgent.toLowerCase().indexOf("iphone")&&(s_bIsIphone=!0);a.length;)if(navigator.platform===a.pop())return!0;return s_bIsIphone=!1}
function isChrome(){var a=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);return a}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}
function getSize(a){var c=a.toLowerCase(),b=window.document,e=b.documentElement;if(void 0===window["inner"+a])a=e["client"+a];else if(window["inner"+a]!=e["client"+a]){var d=b.createElement("body");d.id="vpw-test-b";d.style.cssText="overflow:scroll";var f=b.createElement("div");f.id="vpw-test-d";f.style.cssText="position:absolute;top:-1000px";f.innerHTML="<style>@media("+c+":"+e["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+c+":7px!important}}</style>";d.appendChild(f);e.insertBefore(d,b.head);
a=7==f["offset"+a]?e["client"+a]:window["inner"+a];e.removeChild(d)}else a=window["inner"+a];return a}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){navigator.userAgent.match(/(iPad|iPhone|iPod)/g);var a="safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var c=getSize("Width");_checkOrientation(c,a);s_iScaleFactor=Math.min(a/CANVAS_HEIGHT,c/CANVAS_WIDTH);var b=CANVAS_WIDTH*s_iScaleFactor,e=CANVAS_HEIGHT*s_iScaleFactor;if(e<a){var d=a-e;e+=d;b+=CANVAS_WIDTH/CANVAS_HEIGHT*d}else b<c&&(d=c-b,b+=d,e+=CANVAS_HEIGHT/CANVAS_WIDTH*d);d=a/2-e/2;var f=c/2-b/2,g=CANVAS_WIDTH/
b;if(f*g<-EDGEBOARD_X||d*g<-EDGEBOARD_Y)s_iScaleFactor=Math.min(a/(CANVAS_HEIGHT-2*EDGEBOARD_Y),c/(CANVAS_WIDTH-2*EDGEBOARD_X)),b=CANVAS_WIDTH*s_iScaleFactor,e=CANVAS_HEIGHT*s_iScaleFactor,d=(a-e)/2,f=(c-b)/2,g=CANVAS_WIDTH/b;s_iOffsetX=-1*f*g;s_iOffsetY=-1*d*g;0<=d&&(s_iOffsetY=0);0<=f&&(s_iOffsetX=0);null!==s_oGame&&s_oGame.refreshButtonPos();null!==s_oMenu&&s_oMenu.refreshButtonPos();null!==s_oLevelMenu&&s_oLevelMenu.refreshButtonPos();null!==s_oSelectPlayer&&s_oSelectPlayer.refreshButtonPos();
s_bIsIphone?(canvas=document.getElementById("canvas"),s_oStage.canvas.width=2*b,s_oStage.canvas.height=2*e,canvas.style.width=b+"px",canvas.style.height=e+"px",s_iScaleFactor=2*Math.min(b/CANVAS_WIDTH,e/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor):s_bMobile||isChrome()?($("#canvas").css("width",b+"px"),$("#canvas").css("height",e+"px")):(s_oStage.canvas.width=b,s_oStage.canvas.height=e,s_iScaleFactor=Math.min(b/CANVAS_WIDTH,e/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);
0>d||(d=(a-e)/2);$("#canvas").css("top",d+"px");$("#canvas").css("left",f+"px");fullscreenHandler()}}
function _checkOrientation(a,c){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>c?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function randomFloatBetween(a,c,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(c-a),c).toFixed(b))}function randomIntBetween(a,c,b){"undefined"===typeof b&&(b=2);return parseInt(Math.min(a+Math.random()*(c-a),c).toFixed(b))}function createBitmap(a,c,b){var e=new createjs.Bitmap(a),d=new createjs.Shape;c&&b?d.graphics.beginFill("#fff").drawRect(-c/2,-b/2,c,b):d.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);e.hitArea=d;return e}
function createSprite(a,c,b,e,d,f){a=null!==c?new createjs.Sprite(a,c):new createjs.Sprite(a);c=new createjs.Shape;c.graphics.beginFill("#000000").drawRect(-b,-e,d,f);a.hitArea=c;return a}function randomFloatBetween(a,c,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(c-a),c).toFixed(b))}function shuffle(a){for(var c=a.length,b,e;0!==c;)e=Math.floor(Math.random()*c),--c,b=a[c],a[c]=a[e],a[e]=b;return a}
function formatTime(a){a/=1E3;var c=Math.floor(a/60);a=parseFloat(a-60*c).toFixed(1);var b="";b=10>c?b+("0"+c+":"):b+(c+":");return 10>a?b+("0"+a):b+a}function degreesToRadians(a){return a*Math.PI/180}function checkRectCollision(a,c){var b=getBounds(a,.9);var e=getBounds(c,.98);return calculateIntersection(b,e)}
function calculateIntersection(a,c){var b,e,d,f;var g=a.x+(b=a.width/2);var m=a.y+(e=a.height/2);var l=c.x+(d=c.width/2);var k=c.y+(f=c.height/2);g=Math.abs(g-l)-(b+d);m=Math.abs(m-k)-(e+f);return 0>g&&0>m?(g=Math.min(Math.min(a.width,c.width),-g),m=Math.min(Math.min(a.height,c.height),-m),{x:Math.max(a.x,c.x),y:Math.max(a.y,c.y),width:g,height:m,rect1:a,rect2:c}):null}
function getBounds(a,c){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var e=a.children,d=e.length,f;for(f=0;f<d;f++){var g=getBounds(e[f],1);g.x<b.x&&(b.x=g.x);g.y<b.y&&(b.y=g.y);g.x+g.width>b.x2&&(b.x2=g.x+g.width);g.y+g.height>b.y2&&(b.y2=g.y+g.height)}Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{if(a instanceof createjs.Bitmap){d=
a.sourceRect||a.image;f=d.width*c;var m=d.height*c}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){d=a.spriteSheet.getFrame(a.currentFrame);f=d.rect.width;m=d.rect.height;e=d.regX;var l=d.regY}else b.x=a.x||0,b.y=a.y||0;else b.x=a.x||0,b.y=a.y||0;e=e||0;f=f||0;l=l||0;m=m||0;b.regX=e;b.regY=l;d=a.localToGlobal(0-e,0-l);g=a.localToGlobal(f-e,m-l);f=a.localToGlobal(f-e,0-l);e=a.localToGlobal(0-e,m-l);b.x=
Math.min(Math.min(Math.min(d.x,g.x),f.x),e.x);b.y=Math.min(Math.min(Math.min(d.y,g.y),f.y),e.y);b.width=Math.max(Math.max(Math.max(d.x,g.x),f.x),e.x)-b.x;b.height=Math.max(Math.max(Math.max(d.y,g.y),f.y),e.y)-b.y}return b}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!0);a.dispatchEvent(c)}}};
(function(){function a(a){var b={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};a=a||window.event;a.type in b?document.body.className=b[a.type]:(document.body.className=this[c]?"hidden":"visible",s_oMain&&("hidden"===document.body.className?s_oMain.stopUpdate():s_oMain.startUpdate()))}var c="hidden";c in document?document.addEventListener("visibilitychange",a):(c="mozHidden")in document?document.addEventListener("mozvisibilitychange",a):(c=
"webkitHidden")in document?document.addEventListener("webkitvisibilitychange",a):(c="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function playSound(a,c,b){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)s_aSounds[a].play(),s_aSounds[a].volume(c),s_aSounds[a].loop(b);return null}
function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,c){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(c)}function setMute(a,c){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(c)}function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var c=window.location.search.substring(1).split("&"),b=0;b<c.length;b++){var e=c[b].split("=");if(e[0]==a)return e[1]}}function distanceV2(a,c){var b=a.x-c.x,e=a.y-c.y;return Math.sqrt(b*b+e*e)}function randomRange(a,c){return Math.floor(Math.random()*(c-a))+a}function saveItem(a,c){s_bStorageAvailable&&localStorage.setItem(a,c)}function getItem(a){return s_bStorageAvailable?localStorage.getItem(a):null}function clearAllItem(){localStorage.clear()}
function getRandomColor(){return"rgba("+(Math.floor(127*Math.random()+255)-127)+","+(Math.floor(127*Math.random()+255)-127)+","+(Math.floor(127*Math.random()+255)-127)+",1)"}function fullscreenHandler(){ENABLE_FULLSCREEN&&screenfull.enabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut(),null!==s_oLevelMenu&&s_oLevelMenu.resetFullscreenBut(),null!==s_oSelectPlayer&&s_oSelectPlayer.resetFullscreenBut())}
if(screenfull.enabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut();null!==s_oLevelMenu&&s_oLevelMenu.resetFullscreenBut();null!==s_oSelectPlayer&&s_oSelectPlayer.resetFullscreenBut()});
function CSpriteLibrary(){var a={},c,b,e,d,f,g;this.init=function(a,l,k){c={};e=b=0;d=a;f=l;g=k};this.addSprite=function(d,e){if(!a.hasOwnProperty(d)){var f=new Image;a[d]=c[d]={szPath:e,oSprite:f,bLoaded:!1};b++}};this.getSprite=function(b){return a.hasOwnProperty(b)?a[b].oSprite:null};this._onSpritesLoaded=function(){b=0;f.call(g)};this._onSpriteLoaded=function(){d.call(g);++e===b&&this._onSpritesLoaded()};this.loadSprites=function(){for(var a in c)c[a].oSprite.oSpriteLibrary=this,c[a].oSprite.szKey=
a,c[a].oSprite.onload=function(){this.oSpriteLibrary.setLoaded(this.szKey);this.oSpriteLibrary._onSpriteLoaded(this.szKey)},c[a].oSprite.onerror=function(a){var b=a.currentTarget;setTimeout(function(){c[b.szKey].oSprite.src=c[b.szKey].szPath},500)},c[a].oSprite.src=c[a].szPath};this.setLoaded=function(b){a[b].bLoaded=!0};this.isLoaded=function(b){return a[b].bLoaded};this.getNumSprites=function(){return b}}
var CANVAS_WIDTH=1360,CANVAS_HEIGHT=840,EDGEBOARD_X=120,EDGEBOARD_Y=122,PRIMARY_FONT="walibi",FPS=30,FPS_TIME=1E3/FPS,DISABLE_SOUND_MOBILE=!1,s_oPhysicsController,s_oPhysicsObjects,TIME_STEP_BOX2D=1/60,ITINERATION_BOX2D=7,POSITION_ITINERATION_BOX2D=3,DRAW_BOX2D_CONTEXT=!1,NUM_PLAYERS=8,OBSTACLES_INFO,TEAMMATES_INFO,STARS_INFO,VERTICAL_DUCK=1,CUBE=2,TRAINING_CONE=3,DYNAMIC_CUBE=4,WEDGE=5,CONE=6,HORIZONTAL_DUCK=7,BALL_RADIUS,BALL_DENSITY=1,BALL_FRICTION=.4,BALL_RESTITUTION=.4,BALL_LINEAR_DAMPING=.5,
BALL_CATEGORY_COLLISION=1,FIELD_CATEGORY_COLLISION=2,ON_CONTROLLER_ROLL=0,ON_CONTROLLER_END=1,ON_CONTROLLER_REMOVE=3,WORLD_SCALE=30,MS_ANIM_BALL_FADE=500,TIME_FOR_LAUNCH=400,HIT_BALL_MIN_FORCE=3,VERTEX_SCALE={x:53,y:53},HIT_BALL_MAX_FORCE=50,FORCE_MULTIPLIER=.008,OFFSET_ANGLE_ARROW=0,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,MIN_VELOCITY_FOR_LAUNCH=.16;TIME_FOR_LAUNCH=400;
var BALL_OUT_OF_RANGE={xMax:CANVAS_WIDTH-140,xMin:0},BALL=0,STAR=1,GOAL=2,TEAMMATE=3,CUBE_WOOD=4,CUBE_METAL=5,DUCK=6,GOAL_POST=7,BALL_START_Y=582.5,NUM_ROWS_PAGE_LEVEL=3,NUM_COLS_PAGE_LEVEL=5,s_b2Players,STAR_SCORE,NUM_LEVELS;STATE_LOADING=0;STATE_HELP=STATE_MENU=1;STATE_GAME=3;
var STATE_LEVEL_SELECTION=4,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,LS_SCORES="freekick_training_scores",LS_STARS="freekick_training_stars",LS_LAST_LEVEL="freekick_training_level",ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,LEVEL_INFO=[{obstacles:[],teammates:[],star_0:{x:400,y:520},star_1:{x:680,y:520},star_2:{x:900,y:520}},{obstacles:[{type:2,x:730,y:565}],teammates:[],star_0:{x:430,y:430},star_1:{x:1E3,y:520},star_2:{x:900,y:520}},{obstacles:[{type:2,
x:430,y:565},{type:2,x:570,y:365}],teammates:[{x:600,y:565}],star_0:{x:430,y:430},star_1:{x:680,y:520},star_2:{x:900,y:520}},{obstacles:[{type:2,x:900,y:365},{type:2,x:900,y:295},{type:2,x:900,y:225},{type:2,x:570,y:365}],teammates:[{x:580,y:295},{x:730,y:565}],star_0:{x:800,y:290},star_1:{x:440,y:290},star_2:{x:900,y:520}},{obstacles:[{type:5,x:400,y:560},{type:2,x:590,y:565},{type:2,x:670,y:565},{type:2,x:860,y:395},{type:2,x:940,y:395},{type:7,x:870,y:295}],teammates:[{x:780,y:585}],star_0:{x:640,
y:450},star_1:{x:490,y:470},star_2:{x:900,y:500}},{obstacles:[{type:2,x:590,y:565},{type:3,x:390,y:575},{type:2,x:590,y:495},{type:2,x:590,y:425},{type:4,x:590,y:355},{type:1,x:1050,y:295}],teammates:[{x:750,y:585}],star_0:{x:640,y:470},star_1:{x:410,y:450},star_2:{x:900,y:550}},{obstacles:[{type:6,x:540,y:605},{type:6,x:480,y:605},{type:6,x:420,y:605},{type:5,x:700,y:560},{type:2,x:900,y:450}],teammates:[{x:620,y:585}],star_0:{x:715,y:510},star_1:{x:410,y:450},star_2:{x:1E3,y:530}},{obstacles:[{type:2,
x:540,y:565},{type:2,x:540,y:495},{type:2,x:540,y:425},{type:2,x:540,y:355},{type:2,x:710,y:495},{type:2,x:710,y:425},{type:2,x:710,y:355},{type:2,x:710,y:285},{type:2,x:710,y:215},{type:1,x:440,y:70}],teammates:[{x:620,y:585}],star_0:{x:680,y:550},star_1:{x:600,y:350},star_2:{x:1E3,y:530}},{obstacles:[{type:4,x:540,y:565},{type:4,x:540,y:495},{type:4,x:540,y:425},{type:4,x:540,y:355},{type:2,x:710,y:495},{type:4,x:710,y:425},{type:4,x:710,y:355},{type:4,x:710,y:285},{type:4,x:710,y:215},{type:1,
x:440,y:70},{type:3,x:340,y:580}],teammates:[{x:620,y:585}],star_0:{x:680,y:550},star_1:{x:600,y:350},star_2:{x:1E3,y:530}},{obstacles:[{type:2,x:540,y:565},{type:2,x:540,y:495},{type:2,x:540,y:425},{type:2,x:540,y:355},{type:2,x:870,y:425},{type:2,x:870,y:355},{type:2,x:870,y:575},{type:2,x:710,y:425},{type:2,x:710,y:355},{type:2,x:870,y:285},{type:2,x:870,y:215},{type:1,x:440,y:70},{type:3,x:340,y:580}],teammates:[{x:620,y:585},{x:550,y:285},{x:960,y:585}],star_0:{x:845,y:480},star_1:{x:600,y:350},
star_2:{x:760,y:250}},{obstacles:[{type:6,x:700,y:600},{type:6,x:635,y:600},{type:6,x:570,y:600},{type:6,x:505,y:600},{type:6,x:440,y:600},{type:2,x:455,y:370},{type:2,x:533,y:370},{type:2,x:611,y:370},{type:2,x:689,y:370},{type:2,x:767,y:370},{type:2,x:923,y:440},{type:2,x:923,y:370},{type:2,x:923,y:230},{type:2,x:923,y:160},{type:2,x:923,y:90},{type:2,x:1051,y:310},{type:3,x:895,y:310}],teammates:[{x:550,y:300},{x:810,y:565}],star_0:{x:815,y:220},star_1:{x:360,y:270},star_2:{x:815,y:415}},{obstacles:[{type:2,
x:455,y:565},{type:2,x:615,y:355},{type:2,x:620,y:565},{type:2,x:537,y:565},{type:2,x:870,y:425},{type:2,x:700,y:565},{type:6,x:700,y:530},{type:2,x:700,y:355},{type:2,x:530,y:355},{type:1,x:440,y:70},{type:2,x:1030,y:285},{type:2,x:1030,y:215},{type:2,x:1030,y:145},{type:2,x:1030,y:75}],teammates:[{x:600,y:280},{x:780,y:565}],star_0:{x:925,y:230},star_1:{x:400,y:320},star_2:{x:745,y:350}},{obstacles:[{type:5,x:300,y:560},{type:5,x:650,y:560},{type:2,x:678,y:450},{type:2,x:600,y:450},{type:2,x:522,
y:450},{type:2,x:444,y:450},{type:7,x:760,y:450},{type:1,x:1060,y:300}],teammates:[{x:820,y:565}],star_0:{x:740,y:360},star_1:{x:500,y:240},star_2:{x:400,y:340}},{obstacles:[{type:7,x:340,y:280},{type:7,x:490,y:280},{type:7,x:640,y:280},{type:7,x:540,y:560},{type:1,x:500,y:300},{type:1,x:650,y:300},{type:1,x:800,y:300}],teammates:[],star_0:{x:900,y:520},star_1:{x:500,y:340},star_2:{x:680,y:400}},{obstacles:[{type:3,x:560,y:580},{type:3,x:690,y:580},{type:3,x:800,y:580},{type:2,x:500,y:495},{type:2,
x:578,y:495},{type:2,x:656,y:495},{type:2,x:734,y:495},{type:2,x:890,y:495},{type:2,x:890,y:425},{type:1,x:800,y:280},{type:2,x:500,y:355},{type:2,x:578,y:355},{type:2,x:656,y:355},{type:2,x:734,y:355},{type:2,x:890,y:355},{type:6,x:1080,y:600},{type:7,x:520,y:270}],teammates:[{x:970,y:565}],star_0:{x:925,y:270},star_1:{x:865,y:550},star_2:{x:790,y:515}}];
function CPhysicsController(){var a=Box2D.Common.Math.b2Vec2,c=Box2D.Dynamics.b2World,b=Box2D.Dynamics.b2DebugDraw,e,d,f=this,g=document.getElementById("canvas").getContext("2d");this.init=function(){e=new a(0,9.81);d=new c(e,!0);d.Step(TIME_STEP_BOX2D,ITINERATION_BOX2D,POSITION_ITINERATION_BOX2D);if(DRAW_BOX2D_CONTEXT){var f=new b;f.SetSprite(g);f.SetDrawScale(WORLD_SCALE);f.SetFillAlpha(.5);f.SetLineThickness(1);f.SetFlags(b.e_shapeBit|b.e_jointBit);d.SetDebugDraw(f);window.setInterval(this.updateDrawDebug,
1E3/120)}};this.startComputing=function(a){a.GetBody().SetActive(!0)};this.applyImpulse=function(a,b){a.GetBody().ApplyImpulse(b,a.GetBody().GetWorldCenter())};this.applyForce=function(a,b){a.GetBody().ApplyForce(b,a.GetBody().GetWorldCenter())};this.decreaseSpeedRotation=function(a){var b=.99*a.GetBody().GetAngularVelocity();a.GetBody().SetAngularVelocity(b)};this.destroyAllBody=function(){for(var a=d.GetBodyList();a.GetNext();){var b=a.GetNext();d.DestroyBody(b)}};this.destroyAllJoint=function(){for(var a=
d.GetJointList();a.GetNext();){var b=a.GetNext();d.DestroyJoint(b)}};this.destroyWorld=function(){d=null};this.getSpeedRotation=function(a){return a.GetBody().GetAngularVelocity()};this.moveObject=function(a,b,c){b={x:b/WORLD_SCALE,y:c/WORLD_SCALE};a.GetBody().SetPosition(b)};this.destroyBody=function(a){d.DestroyBody(a.GetBody())};this.destroyJoint=function(a){d.DestroyJoint(a)};this.getJointAngle=function(a){return a.GetJointAngle()*(180/Math.PI)};this.getInstance=function(){null===f&&(f=new CPhysicsController);
return f};this.getJointTranslation=function(a){return a.GetJointTranslation()};this.update=function(){d.Step(.05,3,3);d.ClearForces()};this.updateDrawDebug=function(){d.DrawDebugData()};this.getWorld=function(){return d};this.setElementLinearDamping=function(a,b){a.GetBody().SetLinearDamping(b)};this.setElementAngularVelocity=function(a,b){a.GetBody().SetAngularVelocity(b)};this.setElementPosition=function(a,b){var c={x:b.x/WORLD_SCALE,y:b.y/WORLD_SCALE};a.GetBody().SetPosition(c)};this.getElementPosition=
function(a){var b=a.GetBody().GetPosition();return{x:b.x*WORLD_SCALE,y:b.y*WORLD_SCALE,angle:180*a.GetBody().GetAngle()/Math.PI}};this.setElementAngle=function(a,b){a.GetBody().SetAngle(b*Math.PI/180)};this.getElementAngle=function(a){return 180*a.GetBody().GetAngle()/Math.PI};this.getElementVelocity=function(a){return a.GetBody().GetLinearVelocity()};this.setElementLinearVelocity=function(a,b){a.GetBody().SetLinearVelocity(b)};this.init()}
function CPhysicsObject(){var a=Box2D.Common.Math.b2Vec2,c=Box2D.Dynamics.b2BodyDef,b=Box2D.Dynamics.b2Body,e=Box2D.Dynamics.b2FixtureDef,d=Box2D.Collision.Shapes.b2PolygonShape,f=Box2D.Collision.Shapes.b2CircleShape,g=Box2D.Dynamics.Joints.b2RevoluteJointDef,m,l;this.init=function(){l=s_oPhysicsController.getInstance();m=l.getWorld();s_oPhysicsObjects=this};this.addWall=function(a,f,h,n,g,l,u,v){var k=new e;k.density=l;k.friction=u;k.restitution=v;l=new c;l.type=b.b2_staticBody;k.shape=new d;k.shape.SetAsBox(a/
WORLD_SCALE,f/WORLD_SCALE);l.position.Set(h/WORLD_SCALE,n/WORLD_SCALE);l.angle=g*Math.PI/180;m.CreateBody(l).CreateFixture(k)};this.addLine=function(f,g,h,n,l,r,u,v){var k=new e;k.density=r;k.friction=u;k.restitution=v;k.filter.categoryBits=FIELD_CATEGORY_COLLISION;k.filter.maskBits=-1;k.filter.groupIndex=1;r=new c;r.type=b.b2_staticBody;r.position.Set(f/WORLD_SCALE,g/WORLD_SCALE);r.angle=l*Math.PI/180;r.userData={type:WALL};k.shape=new d;f=[];g=new a;g.Set(h.x/WORLD_SCALE,h.y/WORLD_SCALE);f.push(g);
h=new a;h.Set(n.x/WORLD_SCALE,n.y/WORLD_SCALE);f.push(h);k.shape.SetAsBox(200,.3);k.shape.SetAsArray(f,f.length);return m.CreateBody(r).CreateFixture(k)};this.addPolygon=function(f,g,h,n){var k=new e;k.density=g.density;k.friction=g.friction;k.restitution=g.restitution;k.isSensor=h;h=new c;h.type=b.b2_staticBody;h.position.Set(g.position.x/WORLD_SCALE,g.position.y/WORLD_SCALE);h.angle=g.angle*Math.PI/180;h.userData=n;h.allowSleep=!1;k.shape=new d;f=f.vertices;g=[];for(n=f.length-1;-1<n;n--){var l=
new a;l.Set(f[n].x*VERTEX_SCALE.x/WORLD_SCALE,f[n].y*VERTEX_SCALE.y/WORLD_SCALE);g.push(l)}k.shape.SetAsArray(g,g.length);return m.CreateBody(h).CreateFixture(k)};this.addCollisionPolygon=function(f){var k=new e;k.density=f.density;k.friction=f.friction;k.restitution=f.restitution;f.info.type===PLAYER?(k.filter.categoryBits=FIELD_CATEGORY_COLLISION,k.filter.maskBits=BALL_CATEGORY_COLLISION,k.filter.groupIndex=1):f.info.type===OPPONENT&&(k.filter.categoryBits=OPPONENT_CATEGORY_COLLISION,k.filter.maskBits=
BALL_CATEGORY_COLLISION,k.filter.groupIndex=1);var h=new c;h.type=b.b2_kinematicBody;h.position.Set(f.x/WORLD_SCALE,f.y/WORLD_SCALE);h.angle=f.angle*Math.PI/180;h.userData=f.info;k.shape=new d;for(var g=f.vertex,l=[],r=0;r<g.length;r++){for(var u=[],v=0;v<g[r].length;v++){var w=new a;f.info.type===OPPONENT?w.Set(g[r][v].x/WORLD_SCALE,(g[r][v].y+11)/WORLD_SCALE):w.Set(g[r][v].x/WORLD_SCALE,g[r][v].y/WORLD_SCALE);u.push(w)}k.shape.SetAsArray(u,u.length);l[r]=m.CreateBody(h).CreateFixture(k)}return l};
this.addCollisionShape=function(a){var k=new e;k.density=a.density;k.friction=a.friction;k.restitution=a.restitution;k.filter.categoryBits=OPPONENT_CATEGORY_COLLISION;k.filter.maskBits=BALL_CATEGORY_COLLISION;k.filter.groupIndex=1;var h=new c;h.type=b.b2_dynamicBody;k.shape=new d;k.shape.SetAsBox(a.recWidth/WORLD_SCALE,a.recHeight/WORLD_SCALE);h.position.Set((a.x+a.rec_offset.x)/WORLD_SCALE,(a.y+a.rec_offset.y)/WORLD_SCALE);h.fixedRotation=!0;var n=m.CreateBody(h),l=n.CreateFixture(k);h=new c;var r=
new e;r.density=a.density;r.friction=a.friction;r.restitution=a.restitution;r.filter.categoryBits=OPPONENT_CATEGORY_COLLISION;r.filter.maskBits=-1;r.filter.groupIndex=1;h.type=b.b2_dynamicBody;r.shape=new f(a.radius/WORLD_SCALE);h.position.x=(a.x+a.sph_offset.x)/WORLD_SCALE;h.position.y=(a.y+a.sph_offset.y)/WORLD_SCALE;h.fixedRotation=!0;h.allowSleep=!1;h.bullet=!0;var u=m.CreateBody(h);r=u.CreateFixture(r);h=new c;h.type=b.b2_dynamicBody;k.shape=new d;k.shape.SetAsBox(a.rec_neck.width/WORLD_SCALE,
a.rec_neck.height/WORLD_SCALE);h.position.Set((a.x+a.rec_neck.x)/WORLD_SCALE,(a.y+a.rec_neck.y)/WORLD_SCALE);h.angle=Math.PI/180*a.rec_neck.angle;h.fixedRotation=!0;a=m.CreateBody(h);k=a.CreateFixture(k);h=new g;h.Initialize(n,u,u.GetWorldCenter());u=m.CreateJoint(h);h=new g;h.Initialize(n,a,a.GetWorldCenter());n=m.CreateJoint(h);return{fixture1:l,fixture2:r,fixture3:k,jointA:u,jointB:n}};this.createAContactListener=function(){var a=new Box2D.Dynamics.b2ContactListener;a.BeginContact=function(a){var b=
a.GetFixtureA().GetBody().GetUserData();a=a.GetFixtureB().GetBody().GetUserData();if(null!==b&&null!==a){a.type===STAR&&b.type===BALL&&s_oGame.starCollision(a.index);b.type===STAR&&a.type===BALL&&s_oGame.starCollision(b.index);if(b.type===GOAL&&a.type===BALL)s_oGame.onGoal();if(b.type===GOAL_POST&&a.type===BALL)s_oGame.onHitPost();if(b.type===CUBE_WOOD&&a.type===BALL)s_oGame.onHitWoodCase();if(b.type===CUBE_METAL&&a.type===BALL)s_oGame.onHitMetalCase();b.type===TEAMMATE&&a.type===BALL&&s_oGame.teamMateCollision(b.index);
a.type===DUCK&&s_oGame.duckCollision(a.index);b.type===DUCK&&s_oGame.duckCollision(b.index);b.type!==BALL&&a.type!==BALL||void 0!==b.isSensor||void 0!==a.isSensor||playSound("kick",1,!1)}};m.SetContactListener(a)};this.addBall=function(a,d,g,n,l,r){var k=new e;k.density=n;k.friction=l;k.restitution=r;k.filter.categoryBits=BALL_CATEGORY_COLLISION;k.filter.maskBits=-1;k.filter.groupIndex=1;n=new c;n.type=b.b2_dynamicBody;k.shape=new f(a/WORLD_SCALE);n.allowSleep=!1;n.userData={type:BALL};n.position.x=
d/WORLD_SCALE;n.position.y=g/WORLD_SCALE;n.linearDamping=BALL_LINEAR_DAMPING;n.bullet=!0;return m.CreateBody(n).CreateFixture(k)};this.addCircle=function(a,d,g,l,p,r,u,v){var k=new e;k.density=l;k.friction=p;k.restitution=r;k.isSensor=u;l=new c;l.type=b.b2_staticBody;l.userData=v;k.shape=new f(a/WORLD_SCALE);l.position.x=d/WORLD_SCALE;l.position.y=g/WORLD_SCALE;return m.CreateBody(l).CreateFixture(k)};this.addStaticCircle=function(a,d,g,l,p,r){var k=new e;k.density=l;k.friction=p;k.restitution=r;
l=new c;l.type=b.b2_staticBody;k.shape=new f(a/WORLD_SCALE);l.position.x=d/WORLD_SCALE;l.position.y=g/WORLD_SCALE;return m.CreateBody(l).CreateFixture(k)};this.addRectangle=function(a,f){var k=new e;k.density=a.density;k.friction=a.friction;k.restitution=a.restitution;k.isSensor=a.sensor;k.filter.categoryBits=3;k.filter.maskBits=1;k.filter.groupIndex=1;var g=new c;g.type=b.b2_staticBody;f&&(g.type=b.b2_dynamicBody);void 0!==a.info&&(g.userData=a.info);k.shape=new d;k.shape.SetAsBox(a.width/WORLD_SCALE,
a.height/WORLD_SCALE);g.position.Set(a.x/WORLD_SCALE,a.y/WORLD_SCALE);g.angle=a.angle*Math.PI/180;return m.CreateBody(g).CreateFixture(k)};this.addTriangle=function(f,g,l,n,p,r,u,v,w,B){var k=[],h=new e;h.density=n;h.friction=p;h.restitution=r;h.isSensor=w;n=new c;n.type=b.b2_staticBody;B&&(n.type=b.b2_dynamicBody);n.userData=v;h.shape=new d;for(v=0;3>v;v++)k.push(new a(l[v].i1,l[v].i2));h.shape.SetAsVector(k,3);n.position.Set(f/WORLD_SCALE,g/WORLD_SCALE);n.angle=u*Math.PI/180;return m.CreateBody(n).CreateFixture(h)};
this.setRotation=function(a){this.rotation=a};this._update=function(a){};this.init()}var s_fBallMagnitude;
function CObstacles(a,c,b,e,d){var f,g,m,l,k,t,h,n,p,r;this.init=function(a,b,c,d,e){f=a;g=b;m=c;t=d;k=new createjs.Container;t.addChild(k);n=this;p=!1;e.push(this);r=e.length-1;switch(f){case VERTICAL_DUCK:a=s_oSpriteLibrary.getSprite("duck");b={images:[a],frames:{width:120,height:122,regX:60,regY:61},animations:{idle:[0,5,"idle"],hit:[6,13,"idle"]}};b=new createjs.SpriteSheet(b);h=createSprite(b,"idle",60,61,120,122);h.x=CANVAS_WIDTH/2;h.y=CANVAS_HEIGHT/2;k.addChild(h);l=s_oPhysicsObjects.addCircle(2*
BALL_RADIUS,g,m,99,BALL_FRICTION,1.2,!1,{type:DUCK,index:r});break;case CUBE:a=s_oSpriteLibrary.getSprite("cube");h=createBitmap(a);h.regX=a.width/2;h.regY=a.height/2;h.x=g;h.y=m;k.addChild(h);l=s_oPhysicsObjects.addRectangle({x:g,y:m,width:35,height:35,density:2.5,friction:.5,restitution:.1,angle:0,sensor:!1,info:{type:CUBE_METAL,iIndex:e.length-1}});break;case TRAINING_CONE:a=s_oSpriteLibrary.getSprite("training_cone");h=createBitmap(a);h.x=g;h.y=m;k.addChild(h);e=[{x:.8194444179534912,y:.277777761220932},
{x:.7916666865348816,y:.2083333283662796},{x:.6527777910232544,y:.0972222089767456},{x:.4444444477558136,y:.01388886570930481},{x:.3194444477558136,y:.027777761220932007},{x:.1388888955116272,y:.1111111044883728},{x:.013888888992369175,y:.2361111044883728}];l=s_oPhysicsObjects.addPolygon({vertices:e},{position:{x:b+8,y:c+6},angle:0,density:0,friction:1,restutution:1},!1,null);break;case DYNAMIC_CUBE:a=s_oSpriteLibrary.getSprite("cube_2");h=createBitmap(a);h.regX=a.width/2;h.regY=a.height/2;h.x=g;
h.y=m;k.addChild(h);l=s_oPhysicsObjects.addRectangle({x:g,y:m,width:35,height:35,density:5,friction:.5,restitution:0,angle:0,sensor:!1,info:{type:CUBE_WOOD,iIndex:e.length-1}},!0);s_oPhysicsController.setElementLinearDamping(l,.7);break;case WEDGE:a=s_oSpriteLibrary.getSprite("wedge");h=createBitmap(a);h.x=g;h.y=m;k.addChild(h);b=[];b[0]={i1:40/WORLD_SCALE,i2:-20/WORLD_SCALE};b[1]={i1:-50/WORLD_SCALE,i2:-18/WORLD_SCALE};b[2]={i1:40/WORLD_SCALE,i2:-50/WORLD_SCALE};l=s_oPhysicsObjects.addTriangle(g+
46,m+60,b,2.5,.5,0,0,null,!1,!1);break;case CONE:a=s_oSpriteLibrary.getSprite("cone");h=createBitmap(a);h.x=g;h.y=m;h.regX=a.width/2;h.regY=a.height;k.addChild(h);b=[];b[0]={i1:30/WORLD_SCALE,i2:-15/WORLD_SCALE};b[1]={i1:-30/WORLD_SCALE,i2:-15/WORLD_SCALE};b[2]={i1:0/WORLD_SCALE,i2:-100/WORLD_SCALE};l=s_oPhysicsObjects.addTriangle(g-1,m+15,b,4,0,.3,0,null,!1,!0);s_oPhysicsController.setElementLinearDamping(l,.7);break;case HORIZONTAL_DUCK:a=s_oSpriteLibrary.getSprite("duck"),b={images:[a],frames:{width:120,
height:122,regX:60,regY:61},animations:{idle:[0,5,"idle",.5],hit:[6,13,"idle",.5]}},b=new createjs.SpriteSheet(b),h=createSprite(b,"idle",60,61,120,122),h.x=CANVAS_WIDTH/2,h.y=CANVAS_HEIGHT/2,k.addChild(h),l=s_oPhysicsObjects.addCircle(2*BALL_RADIUS,g,m,99,BALL_FRICTION,1.2,!1,{type:DUCK,index:r})}};this.init(a,c,b,e,d);this.update=function(){var a=s_oPhysicsController.getElementPosition(l);switch(f){case VERTICAL_DUCK:!p&&a.y<=m+250?s_oPhysicsController.setElementPosition(l,{x:a.x,y:a.y+7}):p=!0;
p&&a.y>=m?s_oPhysicsController.setElementPosition(l,{x:a.x,y:a.y-7}):p=!1;a=s_oPhysicsController.getElementPosition(l);h.x=a.x-BALL_RADIUS+17;h.y=a.y-BALL_RADIUS+8;break;case DYNAMIC_CUBE:h.x=a.x;h.y=a.y;h.rotation=a.angle;break;case CONE:h.x=a.x;h.y=a.y-12;h.rotation=a.angle;break;case HORIZONTAL_DUCK:!p&&a.x<=g+350?(h.scaleX=-1,s_oPhysicsController.setElementPosition(l,{x:a.x+7,y:a.y})):p=!0,p&&a.x>=g?(h.scaleX=1,s_oPhysicsController.setElementPosition(l,{x:a.x-7,y:a.y})):p=!1,a=s_oPhysicsController.getElementPosition(l),
h.x=a.x-BALL_RADIUS+17,h.y=a.y-BALL_RADIUS+8}};this.getPhysics=function(){return l};this.destroyObstacle=function(){s_oPhysicsController.destroyBody(l);(new createjs.Tween.get(h)).to({alpha:0},700).call(n.unload)};this.onDuckCollision=function(){f!==VERTICAL_DUCK&&f!==HORIZONTAL_DUCK||h.gotoAndPlay("hit")};this.getY=function(){return h.y};this.unload=function(){t.removeChild(k);-1<d.indexOf(n)&&d.splice(d.indexOf(n),1)}}
function CTeamMate(a,c,b,e){var d,f,g,m,l;this.init=function(b,c,e){d=b;f=c;m=e;g=new createjs.Container;m.addChild(g);b={images:[s_oSpriteLibrary.getSprite("player_"+s_iIndexPlayer)],frames:{width:105,height:136,regX:52.5,regY:68},animations:{idle:[0,11,"idle",.8],shot:[12,16,"idle"]}};b=new createjs.SpriteSheet(b);l=createSprite(b,"idle",52.5,68,105,136);g.addChild(l);b=s_oPhysicsObjects.addRectangle({x:d,y:f,width:20,height:35,density:0,friction:0,restitution:0,sensor:!0,info:{type:TEAMMATE,index:a,
isSensor:!0},angle:0});b=s_oPhysicsController.getElementPosition(b);l.x=b.x;l.y=b.y-27};this.onShot=function(){l.gotoAndPlay("shot")};this.init(c,b,e)}
function CSelectPlayer(){var a,c,b,e,d,f,g,m,l,k,t,h,n,p,r,u,v,w,B,A,C;this.init=function(){r=0;k=new createjs.Container;s_oStage.addChild(k);var y=s_oSpriteLibrary.getSprite("bg_menu");y=createBitmap(y,y.width,y.height);k.addChild(y);y=new createjs.Shape;y.graphics.beginFill("#000000").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);y.alpha=.7;k.addChild(y);y=s_oSpriteLibrary.getSprite("msg_box");var D=createBitmap(y,y.width,y.height);D.regX=y.width/2;D.regY=y.height/2;D.scaleX=1.1;D.scaleY=D.scaleX;D.x=
CANVAS_WIDTH/2;D.y=CANVAS_HEIGHT/2;k.addChild(D);D=createBitmap(y,y.width,y.height);D.regX=y.width/2;D.regY=y.height/2;D.scaleX=.25;D.scaleY=.42;D.x=CANVAS_WIDTH/2+215;D.y=CANVAS_HEIGHT/2;k.addChild(D);t=new createjs.Text(TEXT_TITLE_SELECT_PLAYERS," 40px "+PRIMARY_FONT,"#FFFFFF");t.textBaseline="middle";t.textAlign="center";t.x=CANVAS_WIDTH/2;t.y=CANVAS_HEIGHT/2-230;k.addChild(t);g=[];m=[];l=[];n=[];for(y=0;y<NUM_PLAYERS;y++)g.push(s_oSpriteLibrary.getSprite("player_"+y)),m.push(s_oSpriteLibrary.getSprite("flag_"+
y)),4>y?n.push(new CGfxButton(CANVAS_WIDTH/2-240,CANVAS_HEIGHT/2-140+100*y,m[y],k)):n.push(new CGfxButton(CANVAS_WIDTH/2-240+200,CANVAS_HEIGHT/2-140+100*(y-4),m[y],k)),n[y].addEventListenerWithParams(ON_MOUSE_DOWN,this.onSelectedFlag,this,y);l.push(TEXT_SELECT_PLAYER_0);l.push(TEXT_SELECT_PLAYER_1);l.push(TEXT_SELECT_PLAYER_2);l.push(TEXT_SELECT_PLAYER_3);l.push(TEXT_SELECT_PLAYER_4);l.push(TEXT_SELECT_PLAYER_5);l.push(TEXT_SELECT_PLAYER_6);l.push(TEXT_SELECT_PLAYER_7);p=this.getSpritePlayer(g[0]);
p.x=CANVAS_WIDTH/2+215;p.y=CANVAS_HEIGHT/2;p.scaleX=1.3;p.scaleY=p.scaleX;k.addChild(p);h=new createjs.Text(TEXT_SELECT_PLAYER_0," 30px "+PRIMARY_FONT,"#FFFFFF");h.textBaseline="middle";h.textAlign="center";h.x=p.x;h.y=p.y-130;k.addChild(h);y=s_oSpriteLibrary.getSprite("but_next");u=new CGfxButton(CANVAS_WIDTH-460,CANVAS_HEIGHT-260,y,k);u.addEventListener(ON_MOUSE_UP,this.onSelectedPlayer,this);y=s_oSpriteLibrary.getSprite("but_exit");d=CANVAS_WIDTH-(y.width/2+10);f=y.height/2+10;w=new CGfxButton(d,
f,y,k);w.addEventListener(ON_MOUSE_UP,this.onExit,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)b=d-(y.width+10),e=f,y=s_oSpriteLibrary.getSprite("audio_icon"),B=new CToggle(b,e,y,s_bAudioActive,k),B.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);y=window.document;D=y.documentElement;A=D.requestFullscreen||D.mozRequestFullScreen||D.webkitRequestFullScreen||D.msRequestFullscreen;C=y.exitFullscreen||y.mozCancelFullScreen||y.webkitExitFullscreen||y.msExitFullscreen;!1===ENABLE_FULLSCREEN&&
(A=!1);A&&screenfull.enabled&&(y=s_oSpriteLibrary.getSprite("but_fullscreen"),a=y.width/4+10,c=y.height/2+10,v=new CToggle(a,c,y,s_bFullscreen,k),v.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));this.refreshButtonPos();s_oSelectPlayer=this};this.refreshButtonPos=function(){w.setPosition(d-s_iOffsetX,f+s_iOffsetY);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||B.setPosition(b-s_iOffsetX,e+s_iOffsetY);A&&screenfull.enabled&&v.setPosition(a+s_iOffsetX,c+s_iOffsetY)};this.resetFullscreenBut=
function(){A&&screenfull.enabled&&v.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?C.call(window.document):A.call(window.document.documentElement);sizeHandler()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.onSelectedFlag=function(a){r!==a&&(r=a,h.text=l[a],k.removeChild(p),p=this.getSpritePlayer(g[a]),p.x=CANVAS_WIDTH/2+215,p.y=CANVAS_HEIGHT/2,p.scaleX=1.3,p.scaleY=p.scaleX,k.addChild(p))};this.onSelectedPlayer=function(){s_iIndexPlayer=
r;this.unload();s_oMain.gotoLevelMenu()};this.getSpritePlayer=function(a){a=new createjs.SpriteSheet({images:[a],frames:{width:105,height:136,regX:52.5,regY:68},animations:{idle:[0,11,"idle"]}});return createSprite(a,"idle",52.5,68,105,136)};this.unload=function(){for(var a=0;a<n.length;a++)n[a].unload();u.unload();w.unload();s_oSelectPlayer=null;s_oStage.removeChild(k)};this.onExit=function(){this.unload();s_oMain.gotoMenu()};this.init()}var s_oSelectPlayer=null;
function CPlayer(a,c,b){var e,d,f;this.init=function(a,b,c){d=c;e=new createjs.Container;e.x=a;e.y=b;d.addChild(e);a={images:[s_oSpriteLibrary.getSprite("player_"+s_iIndexPlayer)],frames:{width:105,height:136,regX:52.5,regY:68},animations:{idle:[0,11,"idle",.8],shot:[12,16,"idle"]}};a=new createjs.SpriteSheet(a);f=createSprite(a,"idle",52.5,68,105,136);e.addChild(f)};this.onShot=function(){f.gotoAndPlay("shot")};this.init(a,c,b)}
function CRollingTextController(a,c,b,e,d){var f,g,m,l,k,t,h,n,p,r,u,v,w;this._init=function(a,b,c,d,e){p=[];r=[];k=d;this.setUpdateInfo(c);n=e;v=a;w=b};this.unload=function(){clearInterval(h)};this.setUpdateInfo=function(a){m=0;l=m+a;f=0;g=Math.round(k/FPS);t=0;var b=this;h=setInterval(function(){b.update()},FPS_TIME)};this.addEventListener=function(a,b,c){p[a]=b;r[a]=c};this.addRollingListener=function(a,b,c){p[ON_CONTROLLER_ROLL]=a;r[ON_CONTROLLER_ROLL]=b;u=[];for(a=0;a<c.length;a++)u[a]={step:c[a],
flag:!1}};this.increaseValue=function(a){t=a};this.getTarget=function(){return v};this.update=function(){f++;if(f>g)f=0,v.text=l.toFixed(0),null!==w&&(w.text=l.toFixed(0)),clearInterval(h),null!==p[ON_CONTROLLER_END]&&p[ON_CONTROLLER_END].call(r[ON_CONTROLLER_END],this),0<t?this.setUpdateInfo(t):p[ON_CONTROLLER_REMOVE].call(r[ON_CONTROLLER_REMOVE],this);else{switch(n){case EASE_BACKIN:var a=s_oTweenController.easeInBack(f,0,1,g);break;case EASE_BACKOUT:a=s_oTweenController.easeOutBack(f,0,1,g);break;
case EASE_CUBIC_IN:a=s_oTweenController.easeInCubic(f,0,1,g);break;case EASE_CUBIC_OUT:a=s_oTweenController.easeOutCubic(f,0,1,g);break;case EASE_ELASTIC_OUT:a=s_oTweenController.easeOutElastic(f,0,1,g);break;case EASE_LINEAR:a=s_oTweenController.easeLinear(f,0,1,g);break;case EASE_QUART_BACKIN:a=s_oTweenController.easeBackInQuart(f,0,1,g);break;default:a=s_oTweenController.easeLinear(f,0,1,g)}a=s_oTweenController.tweenValue(m,l,a);for(var b=0;b<u.length;b++)a>=u[b].step&&!u[b].flag&&(u[b].flag=!0,
null!==p[ON_CONTROLLER_ROLL]&&p[ON_CONTROLLER_ROLL].call(r[ON_CONTROLLER_ROLL],b));v.text=a.toFixed(0);null!==w&&(w.text=a.toFixed(0))}};this._init(a,c,b,e,d)}var EASE_LINEAR=0,EASE_CUBIC_IN=1,EASE_QUART_BACKIN=2,EASE_BACKIN=3,EASE_SIN_IN=4,EASE_QUAD_IN=5,EASE_CUBIC_OUT=6,EASE_ELASTIC_OUT=7,EASE_BACKOUT=8,EASE_QUINT_OUT=9,EASE_CUBIC_INOUT=10;
function CTweenController(){this.tweenValue=function(a,c,b){return a+b*(c-a)};this.easeLinear=function(a,c,b,e){return b*a/e+c};this.easeInCubic=function(a,c,b,e){e=(a/=e)*a*a;return c+b*e};this.easeBackInQuart=function(a,c,b,e){e=(a/=e)*a;return c+b*(2*e*e+2*e*a+-3*e)};this.easeInBack=function(a,c,b,e){return b*(a/=e)*a*(2.70158*a-1.70158)+c};this.easeInSine=function(a,c,b,e){return-b*Math.cos(a/e*(Math.PI/2))+b+c};this.easeInQuad=function(a,c,b,e){return b*(a/=e)*a+c};this.easeOutCubic=function(a,
c,b,e){return b*((a=a/e-1)*a*a+1)+c};this.easeOutElastic=function(a,c,b,e){if(0===a)return c;if(1===(a/=e))return c+b;var d=.3*e;return b*Math.pow(2,-10*a)*Math.sin(2*(a*e-d/4)*Math.PI/d)+b+c};this.easeOutBack=function(a,c,b,e){return b*((a=a/e-1)*a*(2.70158*a+1.70158)+1)+c};this.easeInOutCubic=function(a,c,b,e){return 1>(a/=e/2)?b/2*a*a*a+c:b/2*((a-=2)*a*a+2)+c};this.easeOutQuint=function(a,c,b,e){return b*((a=a/e-1)*a*a*a*a+1)+c}}
function CGoal(a,c,b,e){var d,f,g,m,l,k;this.init=function(a,b,c,e){g=a;m=b;l=c;k=e;a=s_oSpriteLibrary.getSprite("goal_front");d=createBitmap(a,a.width,a.height);d.x=CANVAS_WIDTH/2+435;d.y=CANVAS_HEIGHT/2+50;m.addChild(d);a=s_oSpriteLibrary.getSprite("goal_back");f=createBitmap(a,a.width,a.height);f.x=d.x-6;f.y=d.y-6;g.addChild(f)};this.getPhysics=function(){return l};this.getSensor=function(){return k};this.init(a,c,b,e)}
var TEXT_TITLE_SELECT_PLAYERS="SELECT A PLAYER",TEXT_SELECT_PLAYER_0="ARGENTINA",TEXT_SELECT_PLAYER_1="BRAZIL",TEXT_SELECT_PLAYER_2="ENGLAND",TEXT_SELECT_PLAYER_3="FRANCE",TEXT_SELECT_PLAYER_4="GERMANY",TEXT_SELECT_PLAYER_5="ITALY",TEXT_SELECT_PLAYER_6="NETHERLAND",TEXT_SELECT_PLAYER_7="SPAIN",TEXT_SCORE="SCORE: ",TEXT_ARE_SURE="ARE YOU SURE?",TEXT_GAMEOVER="YOU PASSED THIS TRAINING STAGE!",TEXT_GAMEOVER_2="YOU FAILED THIS TRAINING STAGE",TEXT_GAMEOVER_3="YOU'VE FINALLY COMPLETED YOUR WORKOUT!",TEXT_LEVEL=
"LEVEL",TEXT_TOT_SCORE="TOTAL SCORE",TEXT_HELP1_PC="CLICK THE BALL AND DRAG TO SET POWER AND DIRECTION",TEXT_HELP1_MOBILE="TOUCH THE BALL AND DRAG THE FINGER TO SET POWER AND DIRECTION",TEXT_DEVELOPED="DEVELOPED BY",TEXT_DELETE_SAVE="ALL YOUR PROGRESSES WILL BE DELETED\n\nARE YOU SURE?",TEXT_SELECT_MODE_MENU="SELECT MODE",TEXT_SELECT_LEVEL="SELECT A LEVEL",TEXT_ERR_LS="YOUR WEB BROWSER DOES NOT SUPPORT STORING SETTING LOCALLY. IN SAFARI, THE MOST COMMON CAUSE OF THIS IS USING 'PRIVATE BROWSING MODE'. SOME INFO MAY NOT SAVE OR SOME FEATURE MAY NOT WORK PROPERLY.",
TEXT_SHARE_IMAGE="200x200.jpg",TEXT_SHARE_TITLE="Congratulations!",TEXT_SHARE_MSG1="You collected <strong>",TEXT_SHARE_MSG2=" points</strong>!<br><br>Share your score with your friends!",TEXT_SHARE_SHARE1="My score is ",TEXT_SHARE_SHARE2=" points! Can you do better";
function CPreloader(){var a,c,b,e,d,f,g,m,l;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.loadSprites();l=new createjs.Container;s_oStage.addChild(l)};this.unload=function(){l.removeAllChildren()};this._onImagesLoaded=function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};
this.attachSprites=function(){var k=new createjs.Shape;k.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);l.addChild(k);k=s_oSpriteLibrary.getSprite("200x200");g=createBitmap(k);g.regX=.5*k.width;g.regY=.5*k.height;g.x=CANVAS_WIDTH/2;g.y=CANVAS_HEIGHT/2-180;l.addChild(g);m=new createjs.Shape;m.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(g.x-100,g.y-100,200,200,10);l.addChild(m);g.mask=m;k=s_oSpriteLibrary.getSprite("progress_bar");e=createBitmap(k);e.x=CANVAS_WIDTH/2-
k.width/2;e.y=CANVAS_HEIGHT/2+50;l.addChild(e);a=k.width;c=k.height;d=new createjs.Shape;d.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(e.x,e.y,1,c);l.addChild(d);e.mask=d;b=new createjs.Text("","30px "+PRIMARY_FONT,"#fff");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2+100;b.textBaseline="alphabetic";b.textAlign="center";l.addChild(b);f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);l.addChild(f);createjs.Tween.get(f).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(f);
l.removeChild(f)})};this._onButStartRelease=function(){s_oMain._onPreloaderComplete()};this.refreshLoader=function(f){b.text=f+"%";100===f&&(s_oMain._onPreloaderComplete(),b.visible=!1,e.visible=!1);d.graphics.clear();f=Math.floor(f*a/100);d.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(e.x,e.y,f,c)};this._init()}
function CMain(a){var c,b=0,e=0,d=STATE_LOADING,f,g;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);s_oStage.preventSelection=!1;createjs.Touch.enable(s_oStage);s_bMobile=jQuery.browser.mobile;!1===s_bMobile&&(s_oStage.enableMouseOver(FPS),$("body").on("contextmenu","#canvas",function(a){return!1}));s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=FPS;navigator.userAgent.match(/Windows Phone/i)&&
(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;s_oTweenController=new CTweenController;seekAndDestroy()?f=new CPreloader:window.location.href="http://www.codethislab.com/contact-us.html"};this.preloaderReady=function(){this.onLoadedJSON(LEVEL_INFO);c=!0};this.onLoadedJSON=function(a){s_oLevelSettings=new CLevelSettings(a);try{saveItem("ls_available","ok"),s_oMain.loadUserData()}catch(k){s_bStorageAvailable=!1;s_aScores=[];for(a=0;a<NUM_LEVELS;a++)s_aScores[a]=0;s_aStars=[];for(a=0;a<
NUM_LEVELS;a++)s_aStars[a]=0;s_iLastLevel=1}s_oMain._loadImages();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_oMain._initSounds()};this.loadUserData=function(){var a=getItem(LS_SCORES);if(null===a)for(s_aScores=[],a=0;a<NUM_LEVELS;a++)s_aScores[a]=0;else s_aScores=JSON.parse(a);a=getItem(LS_STARS);if(null===a)for(s_aStars=[],a=0;a<NUM_LEVELS;a++)s_aStars[a]=0;else s_aStars=JSON.parse(a);s_iLastLevel=null===getItem(LS_LAST_LEVEL)?1:parseInt(getItem(LS_LAST_LEVEL))};this.soundLoaded=function(){b++;
f.refreshLoader(Math.floor(b/e*100));b===e&&this._onPreloaderComplete()};this._initSounds=function(){Howler.mute(!s_bAudioActive);s_aSoundsInfo=[];s_aSoundsInfo.push({path:"./sounds/",filename:"applause",loop:!1,volume:1,ingamename:"applause"});s_aSoundsInfo.push({path:"./sounds/",filename:"press_button",loop:!1,volume:1,ingamename:"click"});s_aSoundsInfo.push({path:"./sounds/",filename:"game_over",loop:!1,volume:1,ingamename:"game_over"});s_aSoundsInfo.push({path:"./sounds/",filename:"soundtrack",
loop:!0,volume:1,ingamename:"soundtrack"});s_aSoundsInfo.push({path:"./sounds/",filename:"kick",loop:!0,volume:1,ingamename:"kick"});s_aSoundsInfo.push({path:"./sounds/",filename:"goal",loop:!0,volume:1,ingamename:"goal"});s_aSoundsInfo.push({path:"./sounds/",filename:"star",loop:!0,volume:1,ingamename:"star"});s_aSoundsInfo.push({path:"./sounds/",filename:"post",loop:!0,volume:1,ingamename:"post"});s_aSoundsInfo.push({path:"./sounds/",filename:"duck_hit",loop:!0,volume:1,ingamename:"duck_hit"});
s_aSoundsInfo.push({path:"./sounds/",filename:"wood_hit",loop:!0,volume:1,ingamename:"wood_hit"});s_aSoundsInfo.push({path:"./sounds/",filename:"metal_hit",loop:!0,volume:1,ingamename:"metal_hit"});e+=s_aSoundsInfo.length;s_aSounds=[];for(var a=0;a<s_aSoundsInfo.length;a++)this.tryToLoadSound(s_aSoundsInfo[a],!1)};this.tryToLoadSound=function(a,b){setTimeout(function(){s_aSounds[a.ingamename]=new Howl({src:[a.path+a.filename+".mp3"],autoplay:!1,preload:!0,loop:a.loop,volume:a.volume,onload:s_oMain.soundLoaded,
onloaderror:function(a,b){for(var c=0;c<s_aSoundsInfo.length;c++)if(a===s_aSounds[s_aSoundsInfo[c].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[c],!0);break}},onplayerror:function(a){for(var b=0;b<s_aSoundsInfo.length;b++)if(a===s_aSounds[s_aSoundsInfo[b].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[b].ingamename].once("unlock",function(){s_aSounds[s_aSoundsInfo[b].ingamename].play()});break}}})},b?200:0)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,
this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("ctl_logo","./sprites/ctl_logo.png");s_oSpriteLibrary.addSprite("but_info","./sprites/but_info.png");s_oSpriteLibrary.addSprite("but_yes_big","./sprites/but_yes_big.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("audio_icon",
"./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("ball","./sprites/ball.png");s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("arrow","./sprites/arrow.png");s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png");s_oSpriteLibrary.addSprite("but_home","./sprites/but_home.png");s_oSpriteLibrary.addSprite("but_level","./sprites/but_level.png");s_oSpriteLibrary.addSprite("but_next",
"./sprites/but_next.png");s_oSpriteLibrary.addSprite("goal_text","./sprites/goal_text.png");s_oSpriteLibrary.addSprite("but_delete_save","./sprites/but_delete_save.png");s_oSpriteLibrary.addSprite("but_pause","./sprites/but_pause.png");s_oSpriteLibrary.addSprite("but_no","./sprites/but_no.png");s_oSpriteLibrary.addSprite("but_restart_big","./sprites/but_restart_big.png");s_oSpriteLibrary.addSprite("but_next_big","./sprites/but_next_big.png");s_oSpriteLibrary.addSprite("arrow_ball","./sprites/arrow_ball.png");
s_oSpriteLibrary.addSprite("arrow_fill","./sprites/arrow_fill.png");s_oSpriteLibrary.addSprite("arrow_frame","./sprites/arrow_frame.png");s_oSpriteLibrary.addSprite("star","./sprites/star.png");s_oSpriteLibrary.addSprite("goal_front","./sprites/goal_front.png");s_oSpriteLibrary.addSprite("goal_back","./sprites/goal_back.png");s_oSpriteLibrary.addSprite("player","./sprites/player.png");s_oSpriteLibrary.addSprite("star_outline","./sprites/star_outline.png");s_oSpriteLibrary.addSprite("cube","./sprites/cube.png");
s_oSpriteLibrary.addSprite("cube_2","./sprites/cube_2.png");s_oSpriteLibrary.addSprite("training_cone","./sprites/training_cone.png");s_oSpriteLibrary.addSprite("player_0","./sprites/argentina.png");s_oSpriteLibrary.addSprite("player_1","./sprites/brazil.png");s_oSpriteLibrary.addSprite("player_2","./sprites/england.png");s_oSpriteLibrary.addSprite("player_3","./sprites/france.png");s_oSpriteLibrary.addSprite("player_4","./sprites/germany.png");s_oSpriteLibrary.addSprite("player_5","./sprites/italy.png");
s_oSpriteLibrary.addSprite("player_6","./sprites/netherland.png");s_oSpriteLibrary.addSprite("player_7","./sprites/spain.png");s_oSpriteLibrary.addSprite("panel_0","./sprites/argentina_panels.png");s_oSpriteLibrary.addSprite("panel_1","./sprites/brazil_panels.png");s_oSpriteLibrary.addSprite("panel_2","./sprites/england_panels.png");s_oSpriteLibrary.addSprite("panel_3","./sprites/france_panels.png");s_oSpriteLibrary.addSprite("panel_4","./sprites/germany_panels.png");s_oSpriteLibrary.addSprite("panel_5",
"./sprites/italy_panels.png");s_oSpriteLibrary.addSprite("panel_6","./sprites/netherland_panels.png");s_oSpriteLibrary.addSprite("panel_7","./sprites/spain_panels.png");s_oSpriteLibrary.addSprite("flag_0","./sprites/flag_0.png");s_oSpriteLibrary.addSprite("flag_1","./sprites/flag_1.png");s_oSpriteLibrary.addSprite("flag_2","./sprites/flag_2.png");s_oSpriteLibrary.addSprite("flag_3","./sprites/flag_3.png");s_oSpriteLibrary.addSprite("flag_4","./sprites/flag_4.png");s_oSpriteLibrary.addSprite("flag_5",
"./sprites/flag_5.png");s_oSpriteLibrary.addSprite("flag_6","./sprites/flag_6.png");s_oSpriteLibrary.addSprite("flag_7","./sprites/flag_7.png");s_oSpriteLibrary.addSprite("wedge","./sprites/wedge.png");s_oSpriteLibrary.addSprite("cone","./sprites/cone.png");s_oSpriteLibrary.addSprite("duck","./sprites/duck.png");s_oSpriteLibrary.addSprite("arrow_select_level","./sprites/arrow_select_level.png");s_oSpriteLibrary.addSprite("but_kick","./sprites/but_kick.png");s_oSpriteLibrary.addSprite("starbox","./sprites/starbox.png");
s_oSpriteLibrary.addSprite("contact_ball","./sprites/contact_ball.png");s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png");s_oSpriteLibrary.addSprite("supporters_0","./sprites/supporters/supporters_0.png");s_oSpriteLibrary.addSprite("supporters_1","./sprites/supporters/supporters_1.png");s_oSpriteLibrary.addSprite("supporters_2","./sprites/supporters/supporters_2.png");s_oSpriteLibrary.addSprite("supporters_3","./sprites/supporters/supporters_3.png");s_oSpriteLibrary.addSprite("supporters_4",
"./sprites/supporters/supporters_4.png");s_oSpriteLibrary.addSprite("supporters_5","./sprites/supporters/supporters_5.png");s_oSpriteLibrary.addSprite("supporters_6","./sprites/supporters/supporters_6.png");s_oSpriteLibrary.addSprite("supporters_7","./sprites/supporters/supporters_7.png");s_oSpriteLibrary.addSprite("supporters_8","./sprites/supporters/supporters_8.png");s_oSpriteLibrary.addSprite("supporters_9","./sprites/supporters/supporters_9.png");s_oSpriteLibrary.addSprite("supporters_10","./sprites/supporters/supporters_10.png");
s_oSpriteLibrary.addSprite("supporters_11","./sprites/supporters/supporters_11.png");s_oSpriteLibrary.addSprite("supporters_12","./sprites/supporters/supporters_12.png");s_oSpriteLibrary.addSprite("supporters_13","./sprites/supporters/supporters_13.png");s_oSpriteLibrary.addSprite("supporters_14","./sprites/supporters/supporters_14.png");s_oSpriteLibrary.addSprite("supporters_15","./sprites/supporters/supporters_15.png");s_oSpriteLibrary.addSprite("supporters_16","./sprites/supporters/supporters_16.png");
s_oSpriteLibrary.addSprite("supporters_17","./sprites/supporters/supporters_17.png");s_oSpriteLibrary.addSprite("supporters_18","./sprites/supporters/supporters_18.png");s_oSpriteLibrary.addSprite("supporters_19","./sprites/supporters/supporters_19.png");s_oSpriteLibrary.addSprite("supporters_20","./sprites/supporters/supporters_20.png");s_oSpriteLibrary.addSprite("supporters_21","./sprites/supporters/supporters_21.png");s_oSpriteLibrary.addSprite("supporters_22","./sprites/supporters/supporters_22.png");
s_oSpriteLibrary.addSprite("supporters_23","./sprites/supporters/supporters_23.png");s_oSpriteLibrary.addSprite("supporters_24","./sprites/supporters/supporters_24.png");s_oSpriteLibrary.addSprite("supporters_25","./sprites/supporters/supporters_25.png");s_oSpriteLibrary.addSprite("supporters_26","./sprites/supporters/supporters_26.png");s_oSpriteLibrary.addSprite("supporters_27","./sprites/supporters/supporters_27.png");s_oSpriteLibrary.addSprite("supporters_28","./sprites/supporters/supporters_28.png");
s_oSpriteLibrary.addSprite("supporters_29","./sprites/supporters/supporters_29.png");s_oSpriteLibrary.addSprite("supporters_30","./sprites/supporters/supporters_30.png");s_oSpriteLibrary.addSprite("help_touch","./sprites/help_touch.png");e+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;f.refreshLoader(Math.floor(b/e*100));b===e&&this._onPreloaderComplete()};this._onAllImagesLoaded=function(){};this._onPreloaderComplete=function(){f.unload();s_oSoundtrack=
playSound("soundtrack",1,!0);this.gotoMenu()};this.onAllPreloaderImagesLoaded=function(){this._loadImages()};this.gotoMenu=function(){new CMenu;d=STATE_MENU};this.gotoGame=function(){g=new CGame(m);d=STATE_GAME};this.gotoLevelMenu=function(){new CLevelMenu;d=STATE_LEVEL_SELECTION};this.gotoSelectMode=function(){new CSelectMode};this.gotoHelp=function(){new CHelp;d=STATE_HELP};this.stopUpdate=function(){c=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");!1!==DISABLE_SOUND_MOBILE&&
!1!==s_bMobile||Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();c=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)&&s_bAudioActive&&Howler.mute(!1)};this._update=function(a){if(!1!==c){var b=(new Date).getTime();s_iTimeElaps=b-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=b;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);d===STATE_GAME&&g.update();s_oStage.update(a)}};ENABLE_CHECK_ORIENTATION=
a.check_orientation;ENABLE_FULLSCREEN=a.fullscreen;STAR_SCORE=a.star_score;var m=a;s_oMain=this;this.initContainer()}var s_bMobile,s_bAudioActive=!1,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_aScores,s_aStars,s_iLastLevel=1,s_bFullscreen=!1,s_bStorageAvailable=!0,s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oSoundtrack=null,s_aSounds,s_aSoundsInfo,s_oCanvas,s_iIndexPlayer,s_oTweenController;
function CArrow(a,c,b){var e,d,f,g,m,l,k;this._init=function(a,b){e=new createjs.Container;e.x=a;e.y=b;t.addChild(e);var c=s_oSpriteLibrary.getSprite("arrow");f=createBitmap(c);f.regY=.5*c.height;e.addChild(f);g=createBitmap(s_oSpriteLibrary.getSprite("arrow_fill"));g.regY=.5*c.height;e.addChild(g);l=c.width;k=c.height;d=new createjs.Shape;d.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(f.x,f.y,l,k);d.regY=.5*k;e.addChild(d);c=s_oSpriteLibrary.getSprite("arrow_frame");m=createBitmap(c);m.regX=0;
m.regY=.5*c.height;e.addChild(m);g.mask=d};this.unload=function(){createjs.Tween.removeTweens(d);t.removeChild(e)};this.setVisible=function(a){e.visible=a};this.setAngle=function(a){e.rotation=a};this.animHelp=function(a){d.scaleX=0;createjs.Tween.get(d).to({scaleX:1},a,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(d).to({scaleX:0},a,createjs.Ease.cubicInOut).call(function(){h.animHelp(a)})})};this.setPosition=function(a,b){e.x=a;e.y=b};this.setX=function(a){e.x=a};this.setY=function(a){e.y=
a};this.getX=function(){return e.x};this.getY=function(){return e.y};this.mask=function(a){d.graphics.clear();a=Math.floor(a*l/100);d.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(f.x,f.y,a,k)};var t=b;var h=this;this._init(a,c)}
function CStar(a,c,b,e,d){var f,g,m,l;this.init=function(a,b,c,d,e){f=d.width;g=d.height;m=createBitmap(d);m.x=a;m.y=b;l=c;e.addChild(m)};this.setVisible=function(a){m.visible=a};this.setPosition=function(a,b){m.x=a;m.y=b};this.setAngle=function(a){m.rotation=a};this.animCollected=function(a){(new createjs.Tween.get(m)).to({x:a.x-f/2,y:a.y+s_iOffsetY-g/2},1E3,createjs.Ease.backInOut)};this.getX=function(){return m.x};this.getY=function(){return m.y};this.getImage=function(){return m};this.getPhysics=
function(){return l};this.unload=function(){d.removeChild(m);l=m=null};this.animFade=function(){createjs.Tween.get(m).to({alpha:0},MS_ANIM_BALL_FADE,createjs.Ease.cubicOut)};this.init(c,b,e,a,d)}
function CToggle(a,c,b,e,d){var f,g,m,l,k,t,h;this._init=function(a,b,c,d,e){k=[];t=[];var g=new createjs.SpriteSheet({images:[c],frames:{width:c.width/2,height:c.height,regX:c.width/2/2,regY:c.height/2},animations:{state_true:[0],state_false:[1]}});f=d;h=createSprite(g,"state_"+f,c.width/2/2,c.height/2,c.width/2,c.height);h.x=a;h.y=b;h.stop();e.addChild(h);this._initListener()};this.unload=function(){s_bMobile?h.off("mousedown",g):(h.off("mousedown",g),h.off("mouseover",l));h.off("pressup",m);d.removeChild(h)};
this._initListener=function(){s_bMobile?g=h.on("mousedown",this.buttonDown):(g=h.on("mousedown",this.buttonDown),l=h.on("mouseover",this.buttonOver));m=h.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){k[a]=b;t[a]=c};this.setActive=function(a){f=a;h.gotoAndStop("state_"+f)};this.buttonRelease=function(){h.scaleX=1;h.scaleY=1;playSound("click");f=!f;h.gotoAndStop("state_"+f);k[ON_MOUSE_UP]&&k[ON_MOUSE_UP].call(t[ON_MOUSE_UP],f)};this.buttonDown=function(){h.scaleX=.9;h.scaleY=
.9;k[ON_MOUSE_DOWN]&&k[ON_MOUSE_DOWN].call(t[ON_MOUSE_DOWN])};this.buttonOver=function(a){s_bMobile||(a.target.cursor="pointer")};this.setPosition=function(a,b){h.x=a;h.y=b};this._init(a,c,b,e,d)}
function CGfxButton(a,c,b,e){var d,f,g=[],m,l,k,t,h,n,p;this._init=function(a,b,c,e){p=d=!1;f=1;t=[];h=[];n=createBitmap(c);n.x=a;n.y=b;n.scaleX=n.scaleY=f;n.regX=c.width/2;n.regY=c.height/2;e.addChild(n);this._initListener()};this.unload=function(){s_bMobile?n.off("mousedown",m):(n.off("mousedown",m),n.off("mouseover",k));n.off("pressup",l);e.removeChild(n)};this.setVisible=function(a){n.visible=a};this.setClickable=function(a){d=!a};this._initListener=function(){s_bMobile?m=n.on("mousedown",this.buttonDown):
(m=n.on("mousedown",this.buttonDown),k=n.on("mouseover",this.buttonOver));l=n.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){t[a]=b;h[a]=c};this.addEventListenerWithParams=function(a,b,c,d){t[a]=b;h[a]=c;g=d};this.buttonRelease=function(){d||(n.scaleX=f,n.scaleY=f,t[ON_MOUSE_UP]&&t[ON_MOUSE_UP].call(h[ON_MOUSE_UP],g))};this.buttonDown=function(){d||(n.scaleX=.9*f,n.scaleY=.9*f,p||playSound("click",1,0),t[ON_MOUSE_DOWN]&&t[ON_MOUSE_DOWN].call(h[ON_MOUSE_DOWN],g))};this.buttonOver=
function(a){s_bMobile||d||(a.target.cursor="pointer")};this.pulseAnimation=function(){createjs.Tween.get(n).to({scaleX:.9*f,scaleY:.9*f},850,createjs.Ease.quadOut).to({scaleX:f,scaleY:f},650,createjs.Ease.quadIn).call(function(){r.pulseAnimation()})};this.trembleAnimation=function(){createjs.Tween.get(n).to({rotation:5},75,createjs.Ease.quadOut).to({rotation:-5},140,createjs.Ease.quadIn).to({rotation:0},75,createjs.Ease.quadIn).wait(750).call(function(){r.trebleAnimation()})};this.setPosition=function(a,
b){n.x=a;n.y=b};this.setX=function(a){n.x=a};this.setY=function(a){n.y=a};this.getButtonImage=function(){return n};this.getX=function(){return n.x};this.getY=function(){return n.y};this.setMuted=function(a){p=a};var r=this;this._init(a,c,b,e);return this}
function CMenu(){var a,c,b,e,d,f,g,m,l,k,t,h,n,p,r,u=null,v=null,w,B;this._init=function(){s_b2Players=!1;setVolume("soundtrack",.7);t=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(t);var A=s_oSpriteLibrary.getSprite("but_play");a=CANVAS_WIDTH/2;c=CANVAS_HEIGHT-A.height/2-20;w=new CGfxButton(a,c,A,s_oStage);w.addEventListener(ON_MOUSE_DOWN,this._onButTournamentRelease,this);A=s_oSpriteLibrary.getSprite("but_info");l=A.height/2+10;k=A.height/2+10;p=new CGfxButton(CANVAS_WIDTH/
2,CANVAS_HEIGHT-240,A,s_oStage);p.addEventListener(ON_MOUSE_UP,this._onCreditsBut,this);A=s_oSpriteLibrary.getSprite("but_delete_save");s_bStorageAvailable&&(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(b=CANVAS_WIDTH-1.5*A.height-5,e=A.height/2+10):(b=CANVAS_WIDTH-A.width/2-10,e=A.height/2+10),B=new CGfxButton(b,e,A,s_oStage),B.addEventListener(ON_MOUSE_UP,s_oLevelSettings.deleteSaveData,this));if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)A=s_oSpriteLibrary.getSprite("audio_icon"),g=CANVAS_WIDTH-A.height/
2,m=A.height/2+10,n=new CToggle(g,m,A,s_bAudioActive,s_oStage),n.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);A=window.document;var C=A.documentElement;u=C.requestFullscreen||C.mozRequestFullScreen||C.webkitRequestFullScreen||C.msRequestFullscreen;v=A.exitFullscreen||A.mozCancelFullScreen||A.webkitExitFullscreen||A.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(u=!1);u&&screenfull.enabled&&(A=s_oSpriteLibrary.getSprite("but_fullscreen"),d=l+A.width/2+10,f=A.height/2+10,r=new CToggle(d,f,A,s_bFullscreen,
s_oStage),r.addEventListener(ON_MOUSE_UP,this._onFullscreen,this));h=new createjs.Shape;h.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(h);createjs.Tween.get(h).to({alpha:0},1E3).call(function(){h.visible=!1});s_bStorageAvailable||new CMsgBox(TEXT_ERR_LS,s_oStage);this.refreshButtonPos()};this.unload=function(){w.unload();s_bStorageAvailable&&B.unload();h.visible=!1;p.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)n.unload(),n=null;u&&screenfull.enabled&&
r.unload();s_oStage.removeAllChildren();s_oMenu=t=null};this.refreshButtonPos=function(){w.setPosition(a,c-s_iOffsetY);s_bStorageAvailable&&B.setPosition(b-s_iOffsetX,e+s_iOffsetY);p.setPosition(l+s_iOffsetX,s_iOffsetY+k);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||n.setPosition(g-s_iOffsetX,s_iOffsetY+m);u&&screenfull.enabled&&r.setPosition(d+s_iOffsetX,f+s_iOffsetY)};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onCreditsBut=function(){new CCreditsPanel};
this.resetFullscreenBut=function(){u&&screenfull.enabled&&r.setActive(s_bFullscreen)};this._onFullscreen=function(){s_bFullscreen?v.call(window.document):u.call(window.document.documentElement);sizeHandler()};this._onButTournamentRelease=function(){this.unload();jQuery.event.trigger("start_session");new CSelectPlayer};s_oMenu=this;this._init()}var s_oMenu=null;
function CGame(){var a,c,b,e=null,d,f,g,m,l;var k=!0;var t=!1,h,n=!1,p,r,u,v,w,B,A,C,y,D,G,H,T,N,I,L,P,M,S,R,J,O;this._init=function(){setVolume("soundtrack",.1);k=!0;D=H=!1;C=[];y=[];L=!1;for(var h=c=a=0;h<s_oLevelSettings.getCurrentLevel();h++)c+=s_aScores[h];v=new createjs.Container;s_oStage.addChild(v);T=new createjs.Container;s_oStage.addChild(T);this.addStarBg();B=new createjs.Container;s_oStage.addChild(B);w=new createjs.Container;s_oStage.addChild(w);P=S=0;h=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));
for(var n=[],p=0;31>p;p++)n.push(s_oSpriteLibrary.getSprite("supporters_"+p));n=new createjs.SpriteSheet({images:n,frames:{width:1360,height:245},animations:{idle:[0,0,"idle"],anim:[0,30,"idle"]}});R=createSprite(n,"idle",0,0,1360,245);v.addChild(h,R);s_oPhysicsController=new CPhysicsController;d=new CPhysicsObject;d.createAContactListener();g=TIME_FOR_LAUNCH;h=s_oSpriteLibrary.getSprite("ball");BALL_RADIUS=.5*h.width;this._createBall(h,CANVAS_WIDTH/2-400,BALL_START_Y,BALL_DENSITY,BALL_FRICTION,BALL_RESTITUTION);
A=new CPlayer(f.getX()-30,f.getY()-40,v);for(p=0;p<OBSTACLES_INFO.length;p++)new CObstacles(OBSTACLES_INFO[p].type,OBSTACLES_INFO[p].x,OBSTACLES_INFO[p].y,T,C);for(p=0;p<TEAMMATES_INFO.length;p++)y.push(new CTeamMate(p,TEAMMATES_INFO[p].x,TEAMMATES_INFO[p].y,T));d.addRectangle({density:1,friction:.7,width:CANVAS_WIDTH,height:10,x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT/2+190,angle:0,restitution:.5,isSensor:!1});m=new CArrow(0,0,w);m.setVisible(!1);N=[];I=[];for(p=0;p<STARS_INFO.length;p++)this.createStar(STARS_INFO[p].x,
STARS_INFO[p].y,p,N);for(p=0;3>p;p++)I.push(!0);this._createGoal();h=s_oSpriteLibrary.getSprite("contact_ball");M=new createBitmap(h,h.width,h.height);M.regX=h.width/2;M.regY=h.height/2;M.alpha=0;B.addChild(M);l=new createjs.Shape;l.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);l.on("mousedown",this.onMouseDown);l.on("pressmove",this.onPressMove);l.on("pressup",this.onPressUp);s_oStage.addChild(l);b=new CInterface(c);e=new CEndPanel(s_oSpriteLibrary.getSprite("msg_box"));
0===s_oLevelSettings.getCurrentLevel()&&new CHelpPanel(s_oStage);this.refreshButtonPos();jQuery.event.trigger("start_level",s_oLevelSettings.getCurrentLevel())};this.refreshButtonPos=function(){for(var a=0;3>a;a++)J[a].y=O+s_iOffsetY;b.refreshButtonPos()};this._createBall=function(a,b,c,e,g,k){e=d.addBall(a.width/2,b,c,e,g,k);f=new CBall(b,c,e,a,B)};this.addStarBg=function(){var a=s_oSpriteLibrary.getSprite("star_outline"),b=CANVAS_WIDTH/2-a.width-10;O=a.height/2+10;J=[];for(var c=0;3>c;c++){var d=
createBitmap(a);d.regX=a.width/2;d.regY=a.height/2;d.x=b;d.y=O;s_oStage.addChild(d);b+=a.width+10;J.push(d)}};this.createStar=function(a,b,c){var e=s_oSpriteLibrary.getSprite("star");c=d.addCircle(e.width/2,a+e.width/2,b+e.height/2,0,0,0,!0,{type:STAR,index:c,isSensor:!0});N.push(new CStar(e,a,b,c,B))};this._createGoal=function(){var a=[];a.push(new d.addRectangle({x:1130,y:485,width:20,height:4,density:10,friction:0,restitution:1,angle:50,sensor:!0,info:{type:GOAL_POST,isSensor:!0}}));a.push(new d.addRectangle({x:1150,
y:470,width:25,height:4,density:2,friction:0,restitution:.6,angle:0,sensor:!1}));a.push(new d.addRectangle({x:1180,y:485,width:20,height:4,density:2,friction:0,restitution:.6,angle:55,sensor:!1}));a.push(new d.addRectangle({x:1210,y:550,width:60,height:4,density:2,friction:0,restitution:.2,angle:73,sensor:!1}));var b=new d.addRectangle({x:1150,y:555,width:60,height:4,density:2,friction:0,restitution:.2,angle:90,sensor:!0,info:{type:GOAL,isSensor:!0}});new CGoal(v,w,a,b)};this.onGoal=function(){if(!H){H=
!0;R.gotoAndPlay("anim");playSound("goal",1,!1);s_oGame.showGoalText();for(var a=0;a<I.length;a++)I[a]=!1}};this.onHitPost=function(){playSound("post",1,!1)};this.onHitWoodCase=function(){playSound("wood_hit",1,!1)};this.onHitMetalCase=function(){playSound("metal_hit",1,!1)};this.duckCollision=function(a){C[a].onDuckCollision();playSound("duck_hit",1,!1)};this.showGoalText=function(){var d=new createjs.Shape;d.graphics.beginFill("#000000").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);d.alpha=.01;d.on("mousedown",
function(){},this);s_oStage.addChild(d);var f={images:[s_oSpriteLibrary.getSprite("goal_text")],frames:{width:1158,height:210,regX:579,regY:105},animations:{idle:[0,1,"idle",.3]}};f=new createjs.SpriteSheet(f);G=createSprite(f,"idle",579,105,1158,210);G.x=.5*CANVAS_WIDTH;G.y=.5*CANVAS_HEIGHT;G.alpha=0;G.scaleX=.3;G.scaleY=.3;s_oStage.addChild(G);a+=P*STAR_SCORE;s_aStars[s_oLevelSettings.getCurrentLevel()]<P&&(s_aStars[s_oLevelSettings.getCurrentLevel()]=P,saveItem(LS_STARS,JSON.stringify(s_aStars)));
s_aScores[s_oLevelSettings.getCurrentLevel()]<a&&(s_aScores[s_oLevelSettings.getCurrentLevel()]=a,saveItem(LS_SCORES,JSON.stringify(s_aScores)));s_iLastLevel<s_oLevelSettings.getNextLevel()&&(s_iLastLevel=s_oLevelSettings.getNextLevel(),saveItem(LS_LAST_LEVEL,s_iLastLevel));c+=a;b.refreshTotScore(c);(new createjs.Tween.get(G)).to({scaleX:.8,scaleY:.8,alpha:1},900,createjs.Ease.cubicOut).wait(1300).to({scaleX:0,scaleY:0,alpha:0},300,createjs.Ease.cubicIn).call(function(){s_oStage.removeChild(G,d);
e.show(a,0,c)})};this.setPause=function(a){D=a};this.starCollision=function(a){!0===I[a]&&(N[a].animCollected({x:J[P].x,y:O}),P++,I[a]=!1,playSound("star",1,!1))};this.teamMateCollision=function(a){y[a].onShot();s_oGame.addImpulseToBall({x:CANVAS_WIDTH,y:-1*randomIntBetween(1,200)})};this.onMouseDown=function(a){t||(p={x:a.localX,y:a.localY},m.setPosition(f.getX(),f.getY()))};this.onPressMove=function(a){t||(h={x:a.localX,y:a.localY},m.setVisible(!0),s_oGame.arrowUpdate(),n=!0)};this._updatePlay=
function(){if(k){u=s_oPhysicsController.getElementVelocity(f.getPhysics());f.update(u);for(var a=0;a<C.length;a++)C[a].update();L||(this.detectBallVelocityForLaunch(),this.detectBallOutOfRange());s_oPhysicsController.update();1===M.alpha&&(4===S?S=M.alpha=0:S++)}};this.detectBallOutOfRange=function(){if(f.getX()<BALL_OUT_OF_RANGE.xMin||f.getX()>BALL_OUT_OF_RANGE.xMax)L=!0,f.animFadeOut()};this.restartBallPos=function(){0<a?(s_oPhysicsController.setElementPosition(f.getPhysics(),f.getStartPos()),s_oPhysicsController.setElementLinearVelocity(f.getPhysics(),
{x:0,y:0}),s_oPhysicsController.setElementAngularVelocity(f.getPhysics(),0),f.animFadeIn()):!1===H&&e.show(0,1,c)};this.setBooleanLaunch=function(a){t=a};this.restartGame=function(){this.unload();s_oMain.gotoGame()};this.detectBallVelocityForLaunch=function(){t&&(u.x<MIN_VELOCITY_FOR_LAUNCH&&u.x>-MIN_VELOCITY_FOR_LAUNCH&&u.y<MIN_VELOCITY_FOR_LAUNCH&&u.y>-MIN_VELOCITY_FOR_LAUNCH?0>g?(L=!0,s_oPhysicsController.setElementAngularVelocity(f.getPhysics(),0),s_oPhysicsController.setElementLinearVelocity(f.getPhysics(),
{x:0,y:0}),f.animFadeOut()):g-=s_iTimeElaps:g=TIME_FOR_LAUNCH)};this.unload=function(){k=!1;b.unload();this.destroyPhysicsEngine();l.removeAllEventListeners();s_oStage.removeAllChildren();createjs.Tween.removeAllTweens();s_oGame=null};this.onPressUp=function(){m.setVisible(!1);if(n&&!t){var a=new CVector2(p.x-h.x,p.y-h.y);a.scalarProduct(r);var b=a.length();b>HIT_BALL_MIN_FORCE&&(b>HIT_BALL_MAX_FORCE&&(a.normalize(),a.scalarProduct(HIT_BALL_MAX_FORCE)),s_oGame.addImpulseToBall({x:a.getX(),y:a.getY()}),
L=!1,A.onShot(),t=!0);h.x=0;r=h.y=0;n=!1}};this.arrowUpdate=function(){this.angleArrow();this.arrowMask()};this.angleArrow=function(){m.setAngle(180/Math.PI*Math.atan2(p.y-h.y,p.x-h.x)+OFFSET_ANGLE_ARROW)};this.onExit=function(){q.unload();jQuery.event.trigger("end_session");s_oMain.gotoLevelMenu()};this.destroyPhysicsEngine=function(){s_oPhysicsController.destroyAllBody();s_oPhysicsController.destroyWorld();s_oPhysicsController=null};this.arrowMask=function(){var a=Math.ceil(distanceV2(p,h));100<
a&&(a=100);this.setForce(a);m.mask(a)};this.setForce=function(a){r=a*FORCE_MULTIPLIER};this.addImpulseToBall=function(a){s_oPhysicsController.applyImpulse(f.getPhysics(),a);M.x=f.getX()-f.getRadius();M.y=f.getY();M.alpha=1;playSound("kick",1,!1)};this.addImpulseToCube=function(a,b){s_oPhysicsController.applyImpulse(C[b].getPhysics(),a)};this.update=function(){D||this._updatePlay()};s_oGame=this;var q=this;this._init()}var s_oGame=null;
function CInterface(a){var c,b,e,d,f,g,m,l,k,t,h,n,p,r,u,v,w=null,B=null,A,C,y,D,G;this._init=function(a){u=new createjs.Container;s_oStage.addChild(u);var H=s_oSpriteLibrary.getSprite("but_exit");h=CANVAS_WIDTH-H.width/2-10;n=H.height/2+10;r=new CGfxButton(h,n,H,u);r.addEventListener(ON_MOUSE_UP,this._onExit,this);k=CANVAS_WIDTH-1.5*H.width-20;t=H.height/2+10;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)H=s_oSpriteLibrary.getSprite("audio_icon"),p=new CToggle(k,t,H,s_bAudioActive,u),p.addEventListener(ON_MOUSE_UP,
this._onAudioToggle,this);var N=window.document,I=N.documentElement;w=I.requestFullscreen||I.mozRequestFullScreen||I.webkitRequestFullScreen||I.msRequestFullscreen;B=N.exitFullscreen||N.mozCancelFullScreen||N.webkitExitFullscreen||N.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(w=!1);w&&screenfull.enabled?(H=s_oSpriteLibrary.getSprite("but_fullscreen"),m=H.width/4+10,l=H.height/2+10,e=m+H.width/2+10,d=l,v=new CToggle(m,l,H,s_bFullscreen,u),v.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this)):
(e=H.width/4+10,d=H.height/2+10);H=s_oSpriteLibrary.getSprite("but_restart");A=new CGfxButton(e,d,H,u);A.addEventListener(ON_MOUSE_UP,this._onButRestartRelease,this);f=10;g=CANVAS_HEIGHT-20;C=new createjs.Text(TEXT_LEVEL+" "+(s_oLevelSettings.getCurrentLevel()+1)," 30px "+PRIMARY_FONT,"#000064");C.x=f;C.y=g;C.textAlign="left";C.textBaseline="alphabetic";C.outline=3;s_oStage.addChild(C);y=new createjs.Text(C.text," 30px "+PRIMARY_FONT,"#ff6c00");y.x=f;y.y=g;y.textAlign="left";y.textBaseline="alphabetic";
s_oStage.addChild(y);c=CANVAS_WIDTH-10;b=CANVAS_HEIGHT-20;G=new createjs.Text(TEXT_TOT_SCORE+" "+a," 30px "+PRIMARY_FONT,"#000064");G.x=f;G.y=g;G.textAlign="right";G.textBaseline="alphabetic";G.outline=3;s_oStage.addChild(G);D=new createjs.Text(G.text," 30px "+PRIMARY_FONT,"#ff6c00");D.x=c;D.y=b;D.textAlign="right";D.textBaseline="alphabetic";s_oStage.addChild(D);this.refreshButtonPos()};this.starFadeOut=function(){(new createjs.Tween.get(void 0)).to({alpha:0},700)};this.unload=function(){if(!1===
DISABLE_SOUND_MOBILE||!1===s_bMobile)p.unload(),p=null;r.unload();s_oStage.removeChild(u);w&&screenfull.enabled&&v.unload();s_oInterface=null};this.refreshButtonPos=function(){A.setPosition(e+s_iOffsetX,d+s_iOffsetY);r.setPosition(h-s_iOffsetX,s_iOffsetY+n);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||p.setPosition(k-s_iOffsetX,s_iOffsetY+t);w&&screenfull.enabled&&v.setPosition(m+s_iOffsetX,l+s_iOffsetY);C.x=f+s_iOffsetX;C.y=g-s_iOffsetY;y.x=f+s_iOffsetX;y.y=g-s_iOffsetY;G.x=c-s_iOffsetX;G.y=b-s_iOffsetY;
D.x=c-s_iOffsetX;D.y=b-s_iOffsetY};this.refreshTotScore=function(a){D.text=TEXT_TOT_SCORE+" "+a;G.text=TEXT_TOT_SCORE+" "+a};this.setOnTop=function(){s_oStage.addChildAt(u,s_oStage.numChildren)};this._onButRestartRelease=function(){var a=new createjs.Shape;a.graphics.beginFill("#000").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);a.alpha=0;s_oStage.addChild(a);(new createjs.Tween.get(a)).to({alpha:1},250).wait(200).call(function(){s_oGame.restartGame();s_oStage.addChildAt(a,s_oStage.numChildren);(new createjs.Tween.get(a)).to({alpha:0},
250)})};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onExit=function(){new CAreYouSurePanel(s_oGame.onExit)};this.resetFullscreenBut=function(){w&&screenfull.enabled&&v.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?B.call(window.document):w.call(window.document.documentElement);sizeHandler()};s_oInterface=this;this._init(a);return this}var s_oInterface=null;
function CHelpPanel(a){var c,b,e,d,f,g,m,l;this._init=function(a){var k=s_bMobile?TEXT_HELP1_MOBILE:TEXT_HELP1_PC;b=new createjs.Text(k,"24px "+PRIMARY_FONT,"#000");b.textAlign="center";b.lineWidth=500;b.textBaseline="alphabetic";b.outline=4;b.x=.5*CANVAS_WIDTH;b.y=.5*CANVAS_HEIGHT;c=new createjs.Text(k,"24px "+PRIMARY_FONT,"#fff");c.textAlign="center";c.lineWidth=500;c.textBaseline="alphabetic";c.x=b.x;c.y=b.y;d=new createjs.Shape;d.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);
d.alpha=.7;e=new createjs.Container;l=e.on("mousedown",this.unload);e.addChild(d,b,c);a.addChild(e);m=new CArrow(CANVAS_WIDTH/2-400,BALL_START_Y,e);m.setAngle(-25);m.animHelp(1E3);a=s_oSpriteLibrary.getSprite("ball");f=createBitmap(a);f.regX=a.width/2;f.regY=a.height/2;f.x=CANVAS_WIDTH/2-400;f.y=BALL_START_Y;e.addChild(f);a=s_oSpriteLibrary.getSprite("help_touch");g=createBitmap(a);g.regX=.33*a.width;g.regY=.1*a.height;g.x=f.x;g.y=f.y+20;e.addChild(g);this._helpCursorAnim(1E3)};this.unload=function(){createjs.Tween.removeTweens(g);
a.removeChild(e);e.off("mousedown",l)};this._helpCursorAnim=function(a){createjs.Tween.get(g).to({x:f.x-150,y:f.y+60},a,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(g).to({x:f.x,y:f.y},a,createjs.Ease.cubicInOut).call(function(){k._helpCursorAnim(a)})})};this._onExitHelp=function(){this.unload();s_oGame._onExitHelp()};var k=this;this._init(a)}
function CCreditsPanel(){var a,c,b,e,d;this._init=function(){c=new createjs.Shape;c.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);c.alpha=0;c.on("click",function(){});s_oStage.addChild(c);(new createjs.Tween.get(c)).to({alpha:.7},500);b=new createjs.Container;s_oStage.addChild(b);var f=s_oSpriteLibrary.getSprite("msg_box"),g=createBitmap(f);g.regX=f.width/2;g.regY=f.height/2;b.addChild(g);b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT+f.height/2;a=b.y;(new createjs.Tween.get(b)).to({y:CANVAS_HEIGHT/
2},500,createjs.Ease.quartIn);g=new createjs.Text(TEXT_DEVELOPED," 30px "+PRIMARY_FONT,"#ffffff");g.y=-f.height/2+180;g.textAlign="center";g.textBaseline="middle";b.addChild(g);f=new createjs.Text("www.codethislab.com"," 30px "+PRIMARY_FONT,"#ffffff");f.y=80;f.textAlign="center";f.textBaseline="middle";f.lineWidth=300;b.addChild(f);f=s_oSpriteLibrary.getSprite("ctl_logo");d=createBitmap(f);d.on("click",this._onLogoButRelease);d.regX=f.width/2;d.regY=f.height/2;b.addChild(d);d.on("mouseover",this.changePointer,
this);f=s_oSpriteLibrary.getSprite("but_exit");e=new CGfxButton(300,-195,f,b);e.addEventListener(ON_MOUSE_UP,this.unload,this)};this.changePointer=function(a){!1===s_bMobile&&(a.target.cursor="pointer")};this.unload=function(){e.setClickable(!1);(new createjs.Tween.get(c)).to({alpha:0},500);(new createjs.Tween.get(b)).to({y:a},400,createjs.Ease.backIn).call(function(){s_oStage.removeChild(c);s_oStage.removeChild(b);e.unload()});c.removeAllEventListeners();d.removeAllEventListeners()};this._onLogoButRelease=
function(){window.open("http://www.codethislab.com/index.php?&l=en")};this._init()}
function CAreYouSurePanel(a){var c,b,e,d,f,g;this._init=function(a){g=a;s_oGame.setPause(!0);d=new createjs.Shape;d.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);d.alpha=0;d.on("mousedown",function(){});s_oStage.addChild(d);(new createjs.Tween.get(d)).to({alpha:.7},500);f=new createjs.Container;s_oStage.addChild(f);a=s_oSpriteLibrary.getSprite("msg_box");var k=createBitmap(a);k.regX=a.width/2;k.regY=a.height/2;f.addChild(k);f.x=CANVAS_WIDTH/2;f.y=CANVAS_HEIGHT+a.height/2;c=
f.y;(new createjs.Tween.get(f)).to({y:CANVAS_HEIGHT/2-40},500,createjs.Ease.quartIn);k=new createjs.Text(TEXT_ARE_SURE,"74px "+PRIMARY_FONT,"#000000");k.y=-a.height/2+120;k.textAlign="center";k.textBaseline="middle";k.lineWidth=400;k.outline=5;f.addChild(k);a=new createjs.Text(TEXT_ARE_SURE,"74px "+PRIMARY_FONT,"#FFFFFF");a.y=k.y;a.textAlign="center";a.textBaseline="middle";a.lineWidth=400;f.addChild(a);b=new CGfxButton(260,130,s_oSpriteLibrary.getSprite("but_yes_big"),f);b.addEventListener(ON_MOUSE_UP,
this._onButYes,this);e=new CGfxButton(-260,130,s_oSpriteLibrary.getSprite("but_no"),f);e.addEventListener(ON_MOUSE_UP,this._onButNo,this);e.pulseAnimation()};this._onButYes=function(){e.setClickable(!1);b.setClickable(!1);(new createjs.Tween.get(d)).to({alpha:0},500);(new createjs.Tween.get(f)).to({y:c},400,createjs.Ease.backIn).call(function(){m.unload();g()})};this._onButNo=function(){e.setClickable(!1);b.setClickable(!1);(new createjs.Tween.get(d)).to({alpha:0},500);(new createjs.Tween.get(f)).to({y:c},
400,createjs.Ease.backIn).call(function(){m.unload();s_oGame.setPause(!1)})};this.unload=function(){e.unload();b.unload();s_oStage.removeChild(d);s_oStage.removeChild(f);d.removeAllEventListeners()};var m=this;this._init(a)}
function CEndPanel(a){var c,b,e,d,f,g,m,l,k,t,h,n,p,r,u,v,w,B,A,C,y;this._init=function(a){A=this;y=0;h=new createjs.Shape;h.graphics.beginFill("#000").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);h.alpha=.5;C=h.on("mousedown",function(){});c=createBitmap(a);a=c.getBounds();c.regX=a.width/2;c.regY=a.height/2;c.x=CANVAS_WIDTH/2;c.y=CANVAS_HEIGHT/2;e=new createjs.Text(""," 33px "+PRIMARY_FONT,"#000");e.x=CANVAS_WIDTH/2+106;e.y=CANVAS_HEIGHT/2-180;e.textAlign="center";e.textBaseline="alphabetic";e.lineWidth=
450;d=new createjs.Text(""," 33px "+PRIMARY_FONT,"#ffffff");d.x=CANVAS_WIDTH/2+105;d.y=CANVAS_HEIGHT/2-178;d.textAlign="center";d.textBaseline="alphabetic";d.lineWidth=450;f=new createjs.Text(""," 30px "+PRIMARY_FONT,"#000");f.x=CANVAS_WIDTH/2+71;f.y=e.y+130;f.textAlign="center";f.textBaseline="alphabetic";f.lineWidth=550;g=new createjs.Text(""," 30px "+PRIMARY_FONT,"#ffffff");g.x=CANVAS_WIDTH/2+70;g.y=f.y-2;g.textAlign="center";g.textBaseline="alphabetic";g.lineWidth=550;u=new createjs.Text("0",
" 30px "+PRIMARY_FONT,"#000");u.x=CANVAS_WIDTH/2+181;u.y=e.y+130;u.textAlign="center";u.textBaseline="alphabetic";u.lineWidth=550;v=new createjs.Text("0"," 30px "+PRIMARY_FONT,"#ffffff");v.x=CANVAS_WIDTH/2+180;v.y=f.y-2;v.textAlign="center";v.textBaseline="alphabetic";v.lineWidth=550;w=new createjs.Text(""," 30px "+PRIMARY_FONT,"#000");w.x=CANVAS_WIDTH/2+101;w.y=u.y+130;w.textAlign="center";w.textBaseline="alphabetic";w.lineWidth=w;B=new createjs.Text(""," 30px "+PRIMARY_FONT,"#ffffff");B.x=CANVAS_WIDTH/
2+100;B.y=w.y-2;B.textAlign="center";B.textBaseline="alphabetic";B.lineWidth=550;a=s_oSpriteLibrary.getSprite("panel_"+s_iIndexPlayer);a=new createjs.SpriteSheet({images:[a],frames:{width:320,height:430,regX:160,regY:215},animations:{lose:[0,0,0],win:[1,1,1],final_win:[2,2,2]}});n=createSprite(a,"win",160,215,320,430);n.stop();n.x=CANVAS_WIDTH/2-240;n.y=CANVAS_HEIGHT/2;a=s_oSpriteLibrary.getSprite("starbox");p=[];for(var k=0;3>k;k++)p.push(createBitmap(a,a.width,a.height)),p[k].regX=a.width/2,p[k].regY=
a.height/2,p[k].y=CANVAS_HEIGHT/2;p[0].x=CANVAS_WIDTH/2+20;p[1].x=CANVAS_WIDTH/2+100;p[2].x=CANVAS_WIDTH/2+180;b=new createjs.Container;b.alpha=0;b.visible=!1;b.addChild(h,c,u,v,f,g,e,d,n,p[0],p[1],p[2],w,B)};this.onButNext=function(){s_oGame.unload();s_oLevelSettings.nextLevel()?s_oMain.gotoGame():s_oMain.gotoMenu();s_oStage.removeChild(b);jQuery.event.trigger("share_event",m)};this.unload=function(){h.off("mousedown",C)};this._initListener=function(){k.addEventListener(ON_MOUSE_DOWN,this._onExit,
this);l.addEventListener(ON_MOUSE_DOWN,this._onRestart,this)};this.show=function(a,c,h){jQuery.event.trigger("save_score",h);jQuery.event.trigger("end_level",s_oLevelSettings.getCurrentLevel());jQuery.event.trigger("show_interlevel_ad");s_oGame.setPause(!0);w.text=TEXT_TOT_SCORE+" "+h;B.text=TEXT_TOT_SCORE+" "+h;h=s_oSpriteLibrary.getSprite("but_restart_big");l=new CGfxButton(CANVAS_WIDTH/2+180,CANVAS_HEIGHT/2+150,h,b);h=s_oSpriteLibrary.getSprite("but_home");k=new CGfxButton(CANVAS_WIDTH/2-20,CANVAS_HEIGHT/
2+150,h,b);s_oStage.addChild(b);s_oLevelSettings.getCurrentLevel()<NUM_LEVELS&&0===c&&(l.setX(CANVAS_WIDTH/2+100),k.setX(l.getX()-120),h=s_oSpriteLibrary.getSprite("but_next_big"),t=new CGfxButton(CANVAS_WIDTH/2+220,CANVAS_HEIGHT/2+150,h,b),t.addEventListener(ON_MOUSE_DOWN,this.onButNext,this));0===c?playSound("applause"):playSound("game_over");m=a;0===c?(s_oLevelSettings.getCurrentLevel()===s_oLevelSettings.getNumLevel()-1?(n.gotoAndStop("final_win"),e.text=TEXT_GAMEOVER_3,d.text=TEXT_GAMEOVER_3,
d.lineHeight=40,e.lineHeight=40):(n.gotoAndStop("win"),e.text=TEXT_GAMEOVER,d.text=TEXT_GAMEOVER),r=new CRollingTextController(v,u,m,2500,EASE_CUBIC_OUT),r.addEventListener(ON_CONTROLLER_REMOVE,function(){r.unload();r=null}),r.addEventListener(ON_CONTROLLER_END,function(){}),r.addRollingListener(A.onCollectStar,A,[STAR_SCORE,2*STAR_SCORE,3*STAR_SCORE])):(n.gotoAndStop("lose"),m=a=0,e.text=TEXT_GAMEOVER_2,d.text=TEXT_GAMEOVER_2);f.text=TEXT_SCORE;g.text=TEXT_SCORE;b.visible=!0;var p=this;createjs.Tween.get(b).to({alpha:1},
500).call(function(){p._initListener()})};this.onCollectStar=function(){var a=s_oSpriteLibrary.getSprite("star"),c=createBitmap(a,a.width,a.height);c.regX=a.width/2;c.regY=a.height/2;c.x=p[y].x;c.y=p[y].y;c.scaleX=.1;c.scaleY=.1;b.addChild(c);(new createjs.Tween.get(c)).to({scaleX:1,scaleY:1},1200,createjs.Ease.backOut);y++};this._onExit=function(){jQuery.event.trigger("share_event",m);b.removeAllEventListeners();s_oStage.removeChild(b);s_oGame.unload();s_oMain.gotoMenu()};this._onRestart=function(){s_oStage.removeChild(b);
var a=new createjs.Shape;a.graphics.beginFill("#000").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);a.alpha=0;s_oStage.addChild(a);(new createjs.Tween.get(a)).to({alpha:1},250).wait(200).call(function(){s_oGame.restartGame();s_oStage.addChildAt(a,s_oStage.numChildren);(new createjs.Tween.get(a)).to({alpha:0},250)});jQuery.event.trigger("share_event",m)};this._init(a);return this}
function CEdgeModel(a,c,b,e){var d=null,f=null,g=null,m=null,l=null;this._init=function(a,b,c,d){this.set(a,b,c,d)};this.destroy=function(){l=m=g=f=d=null};this.render=function(a){a.moveTo(d.x,d.y);a.lineTo(f.x,f.y)};this.toString=function(a){trace(a+" "+d.x+" "+d.y+" "+f.x+" "+f.y)};this.add=function(a){d.addV(a);f.addV(a)};this.set=function(a,b,c,e){d=new CVector2;f=new CVector2;d.set(a,b);f.set(c,e);this.calculateNormal();this.calculateCenter()};this.moveY=function(a){d.add(0,a);f.add(0,a);this.calculateNormal();
this.calculateCenter()};this.scale=function(a){d.scalarProduct(a);f.scalarProduct(a);this.calculateNormal();this.calculateCenter()};this.calculateNormal=function(){l=null;l=new CVector2;l.setV(f);l.subtract(d);l.rot90CCW();l.normalize()};this.calculateCenter=function(){g=null;g=centerBetweenPointsV2(d,f);m=new CVector2;m.setV(l);m.scalarProduct(5);m.addV(g)};this.getPointA=function(){return d};this.m_pCenter=function(){return g};this.getPointB=function(){return f};this.getNormal=function(){return l};
this.renderNormal=function(a){a.moveTo(g.x,g.y);a.lineTo(m.x,m.y)};this.getLength=function(){return Math.sqrt(Math.pow(b-a,2)+Math.pow(e-c,2))};this._init(a,c,b,e);return this}
function CEdgeViewer(a,c,b,e,d,f){var g;this.init=function(a,b,c,d,e,f){a=a>c||b>d?b===d?(new createjs.Graphics).beginFill("#000").drawRect(c,d,e,f):(new createjs.Graphics).beginFill("#000").drawRect(c,d,f,e):b===d?(new createjs.Graphics).beginFill("#000").drawRect(a,b,e,f):(new createjs.Graphics).beginFill("#000").drawRect(a,b,f,e);g=new createjs.Shape(a);g.y=-f/2;s_oStage.addChild(g)};this.moveY=function(a){g.y+=a};this.init(a,c,b,e,d,f)}
function CEdge(a,c,b,e,d,f){var g,m;this.init=function(a,b,c,d,e){g=new CEdgeModel(a,b,c,d);var h=g.getLength();f&&(m=new CEdgeViewer(a,b,c,d,h,e))};this.getModel=function(){return g};this.moveY=function(a){f&&m.moveY(a);g.moveY(a)};this.init(a,c,b,e,d)}
function CVector2(a,c){var b,e;this._init=function(a,c){b=a;e=c};this.add=function(a,c){b+=a;e+=c};this.addV=function(a){b+=a.getX();e+=a.getY()};this.scalarDivision=function(a){b/=a;e/=a};this.subtract=function(a){b-=a.getX();e-=a.getY()};this.scalarProduct=function(a){b*=a;e*=a};this.invert=function(){b*=-1;e*=-1};this.dotProduct=function(a){return b*a.getX()+e*a.getY()};this.set=function(a,c){b=a;e=c};this.setV=function(a){b=a.getX();e=a.getY()};this.length=function(){return Math.sqrt(b*b+e*e)};
this.length2=function(){return b*b+e*e};this.normalize=function(){var a=this.length();0<a&&(b/=a,e/=a)};this.angleBetweenVectors=function(a){a=Math.acos(this.dotProduct(a)/(this.length()*a.length()));return!0===isNaN(a)?0:a};this.getNormalize=function(a){this.length();a.set(b,e);a.normalize()};this.rot90CCW=function(){var a=b;b=-e;e=a};this.rot90CW=function(){var a=b;b=e;e=-a};this.getRotCCW=function(a){a.set(b,e);a.rot90CCW()};this.getRotCW=function(a){a.set(b,e);a.rot90CW()};this.ceil=function(){b=
Math.ceil(b);e=Math.ceil(e)};this.round=function(){b=Math.round(b);e=Math.round(e)};this.toString=function(){return"Vector2: "+b+", "+e};this.print=function(){trace("Vector2: "+b+", "+e)};this.getX=function(){return b};this.getY=function(){return e};this.rotate=function(a){var c=b,d=e;b=c*Math.cos(a)+d*Math.sin(a);e=c*-Math.sin(a)+d*Math.cos(a)};this._init(a,c)}
function CBall(a,c,b,e,d){var f,g,m,l;this._init=function(a,b,c){m={x:a,y:b};f=createBitmap(c);f.x=a;f.y=b;f.regX=.5*c.width;f.regY=.5*c.height;l=c.width/2;d.addChild(f);a=s_oSpriteLibrary.getSprite("arrow_ball");g=createBitmap(a);g.regX=a.width;g.y=s_iOffsetY;g.visible=!1;d.addChild(g)};this.unload=function(){d.removeChild(f)};this.setVisible=function(a){f.visible=a};this.setPosition=function(a,b){f.x=a;f.y=b};this.setAngle=function(a){f.rotation=a};this.getRadius=function(){return l};this.getX=
function(){return f.x};this.getY=function(){return f.y};this.scale=function(a){f.scaleX=a;f.scaleY=a};this.getPhysics=function(){return b};this.getScale=function(){return f.scaleX};this.childIndex=function(a){s_oStage.setChildIndex(f,a)};this.setAlpha=function(a){f.alpha=a};this.animFadeOut=function(){(new createjs.Tween.get(f)).to({alpha:0},MS_ANIM_BALL_FADE).call(s_oGame.restartBallPos)};this.animFadeIn=function(){(new createjs.Tween.get(f)).to({alpha:1},MS_ANIM_BALL_FADE).call(function(){s_oGame.setBooleanLaunch(!1)})};
this.arrowUpdate=function(a){a.y<s_iOffsetY?(g.visible=!0,g.y=s_iOffsetY,g.x=a.x):g.visible=!1};this.getStartPos=function(){return m};this.update=function(){var a=s_oPhysicsController.getElementPosition(b);this.setPosition(a.x,a.y);this.setAngle(a.angle);this.arrowUpdate(a)};this._init(a,c,e)}
function CLevelSettings(a){var c,b;this.init=function(a){b=0;c=a;NUM_LEVELS=Object.keys(c).length;s_oLevelSettings=this};this.loadLevel=function(a){b=a;OBSTACLES_INFO=c[a].obstacles;TEAMMATES_INFO=c[a].teammates;STARS_INFO=[c[a].star_0,c[a].star_1,c[a].star_2]};this.nextLevel=function(){b++;return b<c.length?(this.loadLevel(b),!0):!1};this.getNextLevel=function(){return b<c.length?b+2:b+1};this.getCurrentLevel=function(){return b};this.getNumLevel=function(){return c.length};this.deleteSaveData=function(){var a=
s_oSpriteLibrary.getSprite("msg_box"),b=new createjs.Container,c=new createBitmap(a,a.width,a.height);c.regX=a.width/2;c.regY=a.height/2;a=new createjs.Text(TEXT_DELETE_SAVE," 40px "+PRIMARY_FONT,"#FFFFFF");a.y=-180;a.textAlign="center";a.lineWidth=700;b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2;b.alpha=0;var g=new createjs.Shape;g.graphics.beginFill("#000000").drawRect(-CANVAS_WIDTH/2,-CANVAS_HEIGHT/2,CANVAS_WIDTH,CANVAS_HEIGHT);g.alpha=.5;g.on("mousedown",function(){},this);s_oStage.addChild(b);b.addChild(g,
c,a);c=new CGfxButton(-100,110,s_oSpriteLibrary.getSprite("but_yes"),b);a=new CGfxButton(100,110,s_oSpriteLibrary.getSprite("but_exit"),b);a.pulseAnimation();a.addEventListener(ON_MOUSE_UP,function(){(new createjs.Tween.get(b)).to({alpha:0},500).call(function(){s_oStage.removeChild(b)})},this);c.addEventListener(ON_MOUSE_UP,function(){clearAllItem();s_oMain.loadUserData();(new createjs.Tween.get(b)).to({alpha:0},500).call(function(){s_oStage.removeChild(b)})},this);(new createjs.Tween.get(b)).to({alpha:1},
500)};this.init(a)}s_oLevelSettings=null;
function CLevelBut(a,c,b,e,d,f,g){var m,l,k,t=[],h=[],n,p,r,u,v,w;this._init=function(a,b,c,d,e,f){l=[];k=[];r=new createjs.Container;B.addChild(r);var g=new createjs.SpriteSheet({images:[d],frames:{width:d.width/2,height:d.height,regX:d.width/2/2,regY:d.height/2},animations:{state_true:[0],state_false:[1]}});m=f;p=createSprite(g,"state_"+m,d.width/2/2,d.height/2,d.width/2,d.height);p.mouseEnabled=f;p.x=a;p.y=b;p.stop();!s_bMobile&&m&&(r.cursor="pointer");r.addChild(p);t.push(p);n=new createjs.Text(c,
"50px "+PRIMARY_FONT,"#ff6c00");n.x=a;n.y=b;n.textAlign="center";n.textBaseline="middle";n.lineWidth=200;w=[];for(c=0;3>c;c++)d=e&&e>c?s_oSpriteLibrary.getSprite("star"):s_oSpriteLibrary.getSprite("starbox"),w.push(createBitmap(d,d.width,d.height)),w[c].regX=d.width/2,w[c].regY=d.height/2,w[c].scaleX=.7,w[c].scaleY=w[c].scaleX,r.addChild(w[c]);w[0].x=a-35;w[0].y=b-45;w[1].x=a;w[1].y=b-60;w[2].x=a+35;w[2].y=b-45;r.addChild(n);f||(n.color="#404040");this._initListener()};this.unload=function(){r.off("mousedown",
u);r.off("pressup",v);r.removeChild(p)};this._initListener=function(){u=r.on("mousedown",this.buttonDown);v=r.on("pressup",this.buttonRelease)};this.viewBut=function(a){r.addChild(a)};this.addEventListener=function(a,b,c){l[a]=b;k[a]=c};this.addEventListenerWithParams=function(a,b,c,d){l[a]=b;k[a]=c;h=d};this.ifClickable=function(){return!0===r.mouseEnabled?1:0};this.setActive=function(a,b){m=b;t[a].gotoAndStop("state_"+m);t[a].mouseEnabled=!0;n.color=m?"#69b8d5":"#b4b4b4"};this.buttonRelease=function(){m&&
(playSound("click",1,0),l[ON_MOUSE_UP]&&l[ON_MOUSE_UP].call(k[ON_MOUSE_UP],h))};this.buttonDown=function(){l[ON_MOUSE_DOWN]&&l[ON_MOUSE_DOWN].call(k[ON_MOUSE_DOWN],h)};this.setPosition=function(a,b){r.x=a;r.y=b};this.setVisible=function(a){r.visible=a};var B=g;this._init(a,c,b,e,d,f,g)}
function CLevelMenu(){var a,c,b,e,d,f,g,m,l,k,t,h,n,p,r,u=null,v=null,w,B,A,C=null,y=null;this._init=function(){setVolume("soundtrack",.7);var t=new createjs.Shape;t.graphics.beginFill("#000000").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);t.alpha=.7;l=0;B=new createjs.Container;s_oStage.addChild(B);var G=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));B.addChild(G);B.addChild(t);g=CANVAS_WIDTH/2;m=18;w=new createjs.Text(TEXT_SELECT_LEVEL,"60px "+PRIMARY_FONT,"#fff");w.x=g;w.textAlign="center";s_oStage.addChild(w);
t=s_oSpriteLibrary.getSprite("but_exit");d=CANVAS_WIDTH-t.width/2-10;f=t.height/2+10;p=new CGfxButton(d,f,t,s_oStage);p.addEventListener(ON_MOUSE_UP,this._onExit,this);k=t.height;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)b=p.getX()-t.width-10,e=t.height/2+10,r=new CToggle(b,e,s_oSpriteLibrary.getSprite("audio_icon"),s_bAudioActive,s_oStage),r.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);t=window.document;G=t.documentElement;C=G.requestFullscreen||G.mozRequestFullScreen||G.webkitRequestFullScreen||
G.msRequestFullscreen;y=t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(C=!1);C&&screenfull.enabled&&(t=s_oSpriteLibrary.getSprite("but_fullscreen"),a=t.width/4+10,c=t.height/2+10,A=new CToggle(a,c,t,s_bFullscreen,s_oStage),A.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));this._checkBoundLimits();h=[];t=Math.floor((CANVAS_WIDTH-2*EDGEBOARD_X)/NUM_COLS_PAGE_LEVEL)/2-15;for(var H=G=0;H<NUM_COLS_PAGE_LEVEL;H++)h.push(G),G+=2*
t;n=[];this._createNewLevelPage(0,s_oLevelSettings.getNumLevel());if(1<n.length){for(t=1;t<n.length;t++)n[t].visible=!1;u=new CGfxButton(CANVAS_WIDTH/2+300,CANVAS_HEIGHT/2+250,s_oSpriteLibrary.getSprite("arrow_select_level"),s_oStage);u.getButtonImage().rotation=90;u.addEventListener(ON_MOUSE_UP,this._onRight,this);v=new CGfxButton(CANVAS_WIDTH/2-300,CANVAS_HEIGHT/2+250,s_oSpriteLibrary.getSprite("arrow_select_level"),s_oStage);v.getButtonImage().rotation=-90;v.addEventListener(ON_MOUSE_UP,this._onLeft,
this)}this.refreshButtonPos()};this.unload=function(){for(var a=0;a<t.length;a++)t[a].unload();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||r.unload();C&&screenfull.enabled&&A.unload();p.unload();null!==v&&(v.unload(),u.unload());s_oStage.removeAllChildren();s_oLevelMenu=null};this.refreshButtonPos=function(){w.y=m+s_iOffsetY;p.setPosition(d-s_iOffsetX,f+s_iOffsetY);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||r.setPosition(b-s_iOffsetX,s_iOffsetY+e);C&&screenfull.enabled&&A.setPosition(a+s_iOffsetX,
c+s_iOffsetY)};this._checkBoundLimits=function(){for(var a=s_oSpriteLibrary.getSprite("but_level"),b=0,c=CANVAS_HEIGHT-2*EDGEBOARD_Y-2*k,d=0;b<c;)b+=a.height+20,d++;NUM_ROWS_PAGE_LEVEL>d&&(NUM_ROWS_PAGE_LEVEL=d);c=b=0;d=CANVAS_WIDTH-2*EDGEBOARD_X;for(a=s_oSpriteLibrary.getSprite("but_level");c<d;)c+=a.width/2+5,b++;NUM_COLS_PAGE_LEVEL>b&&(NUM_COLS_PAGE_LEVEL=b)};this._createNewLevelPage=function(a,b){var c=new createjs.Container;B.addChild(c);n.push(c);t=[];for(var d=0,e=0,f=1,g=!1,k=s_oSpriteLibrary.getSprite("but_level"),
l=a;l<b;l++){var m=new CLevelBut(h[d]+k.width/4,e+k.height/2+30,l+1,k,s_aStars[l],l+1>s_iLastLevel?!1:!0,c);m.addEventListenerWithParams(ON_MOUSE_UP,this._onButLevelRelease,this,l);t.push(m);d++;if(d===h.length&&l<b-1&&(d=0,e+=k.height+50,f++,f>NUM_ROWS_PAGE_LEVEL)){g=!0;break}}c.x=CANVAS_WIDTH/2;c.y=CANVAS_HEIGHT/2;c.regX=c.getBounds().width/2;c.regY=c.getBounds().height/2;g&&this._createNewLevelPage(l+1,b)};this._onRight=function(){n[l].visible=!1;l++;l>=n.length&&(l=0);n[l].visible=!0};this._onLeft=
function(){n[l].visible=!1;l--;0>l&&(l=n.length-1);n[l].visible=!0};this._onButLevelRelease=function(a){s_oLevelSettings.loadLevel(a);this.unload();s_oMain.gotoGame()};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.resetFullscreenBut=function(){C&&screenfull.enabled&&A.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?y.call(window.document):C.call(window.document.documentElement);sizeHandler()};this._onExit=function(){this.unload();
s_oMain.gotoMenu()};s_oLevelMenu=this;this._init()}var s_oLevelMenu=null;
function CMsgBox(a,c){var b,e,d;this._init=function(a){d=new createjs.Container;g.addChild(d);a=new createjs.Shape;a.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);a.alpha=.7;a.on("click",function(){});d.addChild(a);a=s_oSpriteLibrary.getSprite("msg_box");var c=createBitmap(a);c.x=.5*CANVAS_WIDTH;c.y=.5*CANVAS_HEIGHT;c.regX=.5*a.width;c.regY=.5*a.height;d.addChild(c);b=new createjs.Text(TEXT_ERR_LS,"28px "+PRIMARY_FONT,"#fff");b.x=CANVAS_WIDTH/2;b.y=220;b.textAlign="center";
b.textBaseline="middle";b.lineWidth=600;d.addChild(b);e=new CGfxButton(CANVAS_WIDTH/2,550,s_oSpriteLibrary.getSprite("but_yes_big"),d);e.addEventListener(ON_MOUSE_UP,this._onButOk,this)};this._onButOk=function(){f.unload()};this.unload=function(){e.unload();g.removeChild(d)};var f=this;var g=c;this._init(a)}function extractHostname(a){a=-1<a.indexOf("://")?a.split("/")[2]:a.split("/")[0];a=a.split(":")[0];return a=a.split("?")[0]}
function extractRootDomain(a){a=extractHostname(a);var c=a.split("."),b=c.length;2<b&&(a=c[b-2]+"."+c[b-1]);return a}
var getClosestTop=function(){var a=window,c=!1;try{for(;a.parent.document!==a.document;)if(a.parent.document)a=a.parent;else{c=!0;break}}catch(b){c=!0}return{topFrame:a,err:c}},getBestPageUrl=function(a){var c=a.topFrame,b="";if(a.err)try{try{b=window.top.location.href}catch(d){var e=window.location.ancestorOrigins;b=e[e.length-1]}}catch(d){b=c.document.referrer}else b=c.location.href;return b},TOPFRAMEOBJ=getClosestTop(),PAGE_URL=getBestPageUrl(TOPFRAMEOBJ);
function seekAndDestroy(){for(var a=extractRootDomain(PAGE_URL),c=[String.fromCharCode(99,111,100,101,116,104,105,115,108,97,98,46,99,111,109),String.fromCharCode(101,110,118,97,116,111,46,99,111,109),String.fromCharCode(99,111,100,101,99,97,110,121,111,110,46,99,111,109),String.fromCharCode(99,111,100,101,99,97,110,121,111,110,46,110,101,116)],b=0;b<c.length;b++)if(c[b]===a)return!0;return!1};